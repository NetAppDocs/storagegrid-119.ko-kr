---
permalink: tenant/grid-federation-manage-cross-grid-replication.html 
sidebar: sidebar 
keywords: grid federation, cross-grid replication, use grid federation connection, replicate client delete markers, s3 bucket 
summary: 테넌트 계정이 생성될 때 그리드 페더레이션 연결 사용 권한이 할당된 경우, 크로스 그리드 복제를 사용하여 테넌트 소스 그리드의 버킷과 테넌트 대상 그리드의 버킷 간에 개체를 자동으로 복제할 수 있습니다.  교차 그리드 복제는 한 방향 또는 두 방향 모두에서 발생할 수 있습니다. 
---
= 그리드 간 복제 관리
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
테넌트 계정이 생성될 때 *그리드 페더레이션 연결 사용* 권한이 할당된 경우, 크로스 그리드 복제를 사용하여 테넌트의 소스 그리드에 있는 버킷과 테넌트의 대상 그리드에 있는 버킷 간에 개체를 자동으로 복제할 수 있습니다.  교차 그리드 복제는 한 방향 또는 두 방향 모두에서 발생할 수 있습니다.



== 크로스 그리드 복제를 위한 워크플로

워크플로 다이어그램은 두 그리드의 버킷 간에 크로스 그리드 복제를 구성하기 위해 수행하는 단계를 요약한 것입니다.  이러한 단계는 아래에서 더 자세히 설명합니다.

image::../media/grid-federation-cgr-workflow.png[크로스 그리드 복제 워크플로]



== 크로스 그리드 복제 구성

크로스 그리드 복제를 사용하려면 먼저 각 그리드의 해당 테넌트 계정에 로그인하고 동일한 버킷을 만들어야 합니다. 그런 다음 두 버킷 중 하나 또는 둘 다에서 크로스 그리드 복제를 활성화할 수 있습니다.

.시작하기 전에
* 크로스 그리드 복제에 대한 요구 사항을 검토했습니다. 보다 link:../admin/grid-federation-what-is-cross-grid-replication.html["크로스 그리드 복제란 무엇입니까?"] .
* 당신은 사용 중입니다link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"] .
* 테넌트 계정에는 *그리드 페더레이션 연결 사용* 권한이 있으며, 두 그리드에 동일한 테넌트 계정이 있습니다. 보다 link:../admin/grid-federation-manage-tenants.html["그리드 연합 연결을 위한 허용된 테넌트 관리"] .
* 로그인하려는 테넌트 사용자는 두 그리드에 이미 존재하며 다음 권한이 있는 사용자 그룹에 속합니다.link:tenant-management-permissions.html["루트 액세스 권한"] .
* 로컬 사용자로 테넌트의 대상 그리드에 로그인하는 경우 테넌트 계정의 루트 사용자는 해당 그리드에서 사용자 계정에 대한 비밀번호를 설정했습니다.




=== 두 개의 동일한 버킷을 만듭니다.

첫 번째 단계로, 각 그리드의 해당 테넌트 계정에 로그인하여 동일한 버킷을 만듭니다.

.단계
. 그리드 연합 연결의 두 그리드 중 하나에서 시작하여 새 버킷을 만듭니다.
+
.. 두 그리드에 모두 존재하는 테넌트 사용자의 자격 증명을 사용하여 테넌트 계정에 Sign in .
+

NOTE: 로컬 사용자로 테넌트의 대상 그리드에 로그인할 수 없는 경우 테넌트 계정의 루트 사용자가 사용자 계정에 대한 비밀번호를 설정했는지 확인하세요.

.. 지시사항을 따르세요link:creating-s3-bucket.html["S3 버킷을 생성하세요"] .
.. *개체 설정 관리* 탭에서 *개체 버전 관리 사용*을 선택합니다.
.. StorageGRID 시스템에서 S3 개체 잠금이 활성화된 경우 버킷에 대해 S3 개체 잠금을 활성화하지 마세요.
.. *버킷 만들기*를 선택합니다.
.. *마침*을 선택하세요.


. 그리드 페더레이션 연결의 다른 그리드에서 동일한 테넌트 계정에 대해 동일한 버킷을 만들려면 이 단계를 반복합니다.
+

TIP: 필요에 따라 각 버킷은 다른 지역을 사용할 수 있습니다.





=== 크로스 그리드 복제 활성화

버킷에 객체를 추가하기 전에 다음 단계를 수행해야 합니다.

.단계
. 복제하려는 객체가 있는 그리드에서 시작하여 다음을 활성화합니다.link:../admin/grid-federation-what-is-cross-grid-replication.html["한 방향으로의 교차 그리드 복제"] :
+
.. 버킷의 테넌트 계정에 Sign in .
.. 대시보드에서 *버킷 보기*를 선택하거나 *스토리지(S3)* > *버킷*을 선택하세요.
.. 버킷 세부 정보 페이지에 액세스하려면 표에서 버킷 이름을 선택하세요.
.. *크로스 그리드 복제* 탭을 선택합니다.
.. *활성화*를 선택하고 요구 사항 목록을 검토하세요.
.. 모든 요구 사항이 충족되면 사용할 그리드 연합 연결을 선택하세요.
.. 선택적으로, S3 클라이언트가 버전 ID를 포함하지 않는 소스 그리드에 삭제 요청을 발행하는 경우 대상 그리드에서 어떤 일이 발생하는지 결정하기 위해 *삭제 마커 복제* 설정을 변경합니다.
+
*** *예* (기본값): 삭제 마커가 소스 버킷에 추가되고 대상 버킷에 복제됩니다.
*** *아니요*: 삭제 마커는 소스 버킷에 추가되지만 대상 버킷에 복제되지 않습니다.
+
image::../media/grid-federation-cross-grid-replication-client-deletes.png[두 그리드 모두에서 복제 클라이언트 삭제를 보여주는 이미지]

+

NOTE: 삭제 요청에 버전 ID가 포함되어 있는 경우 해당 개체 버전은 소스 버킷에서 영구적으로 제거됩니다. StorageGRID 버전 ID가 포함된 삭제 요청을 복제하지 않으므로 대상에서 동일한 개체 버전이 삭제되지 않습니다.

+
보다link:../admin/grid-federation-what-is-cross-grid-replication.html["크로스 그리드 복제란 무엇입니까?"] 자세한 내용은.



.. 선택적으로, 감사 메시지의 볼륨을 관리하기 위해 *크로스 그리드 복제* 감사 범주의 설정을 변경합니다.
+
*** *오류* (기본값): 실패한 크로스 그리드 복제 요청만 감사 출력에 포함됩니다.
*** *일반*: 모든 크로스 그리드 복제 요청이 포함되어 감사 출력 볼륨이 크게 증가합니다.


.. 선택 사항을 검토하세요.  두 버킷이 모두 비어 있지 않으면 이러한 설정을 변경할 수 없습니다.
.. *활성화 및 테스트*를 선택합니다.
+
잠시 후 성공 메시지가 나타납니다. 이 버킷에 추가된 객체는 이제 다른 그리드에 자동으로 복제됩니다. *크로스 그리드 복제*는 버킷 세부 정보 페이지에서 활성화된 기능으로 표시됩니다.



. 선택적으로 다른 그리드의 해당 버킷으로 이동하여link:../admin/grid-federation-what-is-cross-grid-replication.html["양방향으로 크로스 그리드 복제를 활성화합니다."] .




== 그리드 간 복제 테스트

버킷에 대해 크로스 그리드 복제가 활성화된 경우 연결 및 크로스 그리드 복제가 올바르게 작동하는지, 소스 및 대상 버킷이 여전히 모든 요구 사항을 충족하는지(예: 버전 관리가 여전히 활성화되어 있는지) 확인해야 할 수 있습니다.

.시작하기 전에
* 당신은 사용 중입니다link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"] .
* 당신은 다음 사용자 그룹에 속해 있습니다.link:tenant-management-permissions.html["루트 액세스 권한"] .


.단계
. 버킷의 테넌트 계정에 Sign in .
. 대시보드에서 *버킷 보기*를 선택하거나 *스토리지(S3)* > *버킷*을 선택하세요.
. 버킷 세부 정보 페이지에 액세스하려면 표에서 버킷 이름을 선택하세요.
. *크로스 그리드 복제* 탭을 선택합니다.
. *연결 테스트*를 선택하세요.
+
연결이 정상적이면 성공 배너가 나타납니다. 그렇지 않으면 오류 메시지가 나타나는데, 이를 통해 그리드 관리자가 문제를 해결할 수 있습니다. 자세한 내용은 다음을 참조하십시오. link:../admin/grid-federation-troubleshoot.html["그리드 페더레이션 오류 문제 해결"] .

. 크로스 그리드 복제가 양방향으로 발생하도록 구성된 경우 다른 그리드의 해당 버킷으로 이동하여 *연결 테스트*를 선택하여 크로스 그리드 복제가 다른 방향에서도 작동하는지 확인합니다.




== 크로스 그리드 복제 비활성화

더 이상 다른 그리드에 객체를 복사하지 않으려면 크로스 그리드 복제를 영구적으로 중지할 수 있습니다.

크로스 그리드 복제를 비활성화하기 전에 다음 사항에 유의하세요.

* 그리드 간 복제를 비활성화해도 그리드 간에 이미 복사된 개체는 제거되지 않습니다. 예를 들어, 객체 `my-bucket` 복사된 그리드 1에 `my-bucket` 그리드 2의 버킷에 대해 크로스 그리드 복제를 비활성화하면 해당 버킷은 제거되지 않습니다. 이러한 객체를 삭제하려면 수동으로 제거해야 합니다.
* 각 버킷에 대해 교차 그리드 복제가 활성화된 경우(즉, 복제가 양방향으로 발생하는 경우) 두 버킷 중 하나 또는 둘 다에 대해 교차 그리드 복제를 비활성화할 수 있습니다.  예를 들어, 개체 복제를 비활성화할 수 있습니다. `my-bucket` 그리드 1에서 `my-bucket` 그리드 2에서 객체를 계속 복제하는 동안 `my-bucket` 그리드 2에서 `my-bucket` 그리드 1에서.
* 테넌트의 그리드 페더레이션 연결 사용 권한을 제거하려면 먼저 크로스 그리드 복제를 비활성화해야 합니다. 보다 link:../admin/grid-federation-manage-tenants.html["허가된 세입자 관리"] .
* 객체가 포함된 버킷에 대해 크로스 그리드 복제를 비활성화하면 소스 버킷과 대상 버킷 모두에서 모든 객체를 삭제하지 않는 한 크로스 그리드 복제를 다시 활성화할 수 없습니다.
+

CAUTION: 두 버킷이 모두 비어 있지 않으면 복제를 다시 활성화할 수 없습니다.



.시작하기 전에
* 당신은 사용 중입니다link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"] .
* 당신은 다음 사용자 그룹에 속해 있습니다.link:tenant-management-permissions.html["루트 액세스 권한"] .


.단계
. 더 이상 복제하지 않으려는 객체가 있는 그리드에서 시작하여 버킷에 대한 그리드 간 복제를 중지합니다.
+
.. 버킷의 테넌트 계정에 Sign in .
.. 대시보드에서 *버킷 보기*를 선택하거나 *스토리지(S3)* > *버킷*을 선택하세요.
.. 버킷 세부 정보 페이지에 액세스하려면 표에서 버킷 이름을 선택하세요.
.. *크로스 그리드 복제* 탭을 선택합니다.
.. *복제 비활성화*를 선택합니다.
.. 이 버킷에 대한 크로스 그리드 복제를 비활성화하려면 텍스트 상자에 *예*를 입력하고 *비활성화*를 선택합니다.
+
잠시 후 성공 메시지가 나타납니다. 이 버킷에 추가된 새 개체는 더 이상 다른 그리드에 자동으로 복제될 수 없습니다.  *크로스 그리드 복제*는 더 이상 버킷 페이지에서 활성화된 기능으로 표시되지 않습니다.



. 크로스 그리드 복제가 양방향으로 발생하도록 구성된 경우 다른 그리드의 해당 버킷으로 이동하여 다른 방향의 크로스 그리드 복제를 중지합니다.

