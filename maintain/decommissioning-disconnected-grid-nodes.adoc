---
permalink: maintain/decommissioning-disconnected-grid-nodes.html 
sidebar: sidebar 
keywords: storagegrid, disconnected nodes, decommission node 
summary: '현재 그리드에 연결되지 않은 노드(상태가 알려지지 않았거나 관리자가 중단한 노드)를 해제해야 할 수도 있습니다.' 
---
= 연결이 끊긴 그리드 노드 해제
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
현재 그리드에 연결되지 않은 노드(상태가 알 수 없거나 관리상 다운된 노드)를 해제해야 할 수도 있습니다.

.시작하기 전에
* 당신은 해체에 대한 고려 사항을 이해합니다link:considerations-for-decommissioning-admin-or-gateway-nodes.html["관리자 및 게이트웨이 노드"] 그리고 해체에 대한 고려 사항link:considerations-for-decommissioning-storage-nodes.html["저장 노드"] .
* 모든 필수 아이템을 획득했습니다.
* 데이터 복구 작업이 활성화되지 않았는지 확인하세요. 보다 link:checking-data-repair-jobs.html["데이터 복구 작업 확인"] .
* 그리드의 어느 곳에서도 스토리지 노드 복구가 진행 중이지 않음을 확인했습니다.  그렇다면 복구의 일부로 수행된 Cassandra 재구축이 완료될 때까지 기다려야 합니다.  그런 다음 해체를 진행할 수 있습니다.
* 노드 해제 절차가 일시 중지되지 않는 한, 노드 해제 절차가 실행되는 동안 다른 유지 관리 절차가 실행되지 않도록 해야 합니다.
* 해제하려는 연결이 끊긴 노드의 *해제 가능* 열에는 녹색 확인 표시가 포함됩니다.
* 프로비저닝 암호가 있습니다.


.이 작업에 관하여
파란색 알 수 없음 아이콘을 찾아 연결이 끊긴 노드를 식별할 수 있습니다.image:../media/icon_alarm_blue_unknown.png["아이콘을 알 수 없음"] 또는 회색 관리 중단 아이콘image:../media/icon_alarm_gray_administratively_down.png["아이콘 관리상 다운됨"] *건강* 열에서.

연결이 끊긴 노드를 해제하기 전에 다음 사항에 유의하세요.

* 이 절차는 주로 연결이 끊긴 단일 노드를 제거하는 데 사용됩니다.  그리드에 연결이 끊긴 노드가 여러 개 있는 경우 소프트웨어에서 모든 노드를 동시에 해제하도록 요구하므로 예상치 못한 결과가 발생할 가능성이 커집니다.
+

CAUTION: 한 번에 두 개 이상의 연결이 끊긴 스토리지 노드를 해제하면 데이터 손실이 발생할 수 있습니다. 보다 link:considerations-for-decommissioning-storage-nodes.html#considerations-disconnected-storage-nodes["연결이 끊긴 스토리지 노드에 대한 고려 사항"] .

+

CAUTION: 소프트웨어 기반 메타데이터 전용 노드가 포함된 그리드에서 스토리지 노드를 해제할 때는 주의하세요.  객체와 메타데이터를 모두 저장하도록 구성된 모든 노드를 해제하면 그리드에서 객체를 저장하는 기능이 제거됩니다.  보다link:../primer/what-storage-node-is.html#types-of-storage-nodes["저장 노드 유형"] 메타데이터 전용 스토리지 노드에 대한 자세한 내용은 다음을 참조하세요.

* 연결이 끊긴 노드를 제거할 수 없는 경우(예: ADC 쿼럼에 필요한 스토리지 노드) 다른 연결이 끊긴 노드도 제거할 수 없습니다.


.단계
. 아카이브 노드를 해제하지 않는 한(연결을 끊어야 함), 연결이 끊어진 그리드 노드를 다시 온라인으로 전환하거나 복구해 보세요.
+
보다link:warnings-and-considerations-for-grid-node-recovery.html["그리드 노드 복구 절차"] 지침을 보려면.

. 연결이 끊긴 그리드 노드를 복구할 수 없고 연결이 끊긴 동안 해당 노드를 서비스 해제하려면 해당 노드의 확인란을 선택합니다.
+

NOTE: 그리드에 연결이 끊긴 노드가 여러 개 있는 경우 소프트웨어에서 모든 노드를 동시에 해제하도록 요구하므로 예상치 못한 결과가 발생할 가능성이 커집니다.

+

CAUTION: 한 번에 두 개 이상의 연결이 끊긴 그리드 노드를 해제하기로 선택할 때는 주의해야 하며, 특히 여러 개의 연결이 끊긴 스토리지 노드를 선택하는 경우에는 더욱 그렇습니다.  복구할 수 없는 연결이 끊긴 스토리지 노드가 두 개 이상 있는 경우 기술 지원팀에 문의하여 가장 좋은 대처 방법을 확인하세요.

. 프로비저닝 암호를 입력하세요.
+
*해제 시작* 버튼이 활성화되었습니다.

. *해제 시작*을 클릭하세요.
+
연결이 끊긴 노드를 선택했으며 해당 노드에 개체의 유일한 사본이 있는 경우 개체 데이터가 손실된다는 경고가 나타납니다.

. 노드 목록을 검토하고 *확인*을 클릭합니다.
+
해체 절차가 시작되고 각 노드의 진행 상황이 표시됩니다. 이 절차 동안 그리드 구성 변경 사항을 포함하는 새로운 복구 패키지가 생성됩니다.

. 새로운 복구 패키지가 출시되면 링크를 클릭하거나 *유지 관리* > *시스템* > *복구 패키지*를 선택하여 복구 패키지 페이지에 접속하세요. 그런 다음 다운로드하세요 `.zip` 파일.
+
지침을 참조하세요link:downloading-recovery-package.html["복구 패키지 다운로드"] .

+

NOTE: 해체 절차 중에 문제가 발생할 경우 전력망을 복구할 수 있도록 최대한 빨리 복구 패키지를 다운로드하세요.

+

CAUTION: 복구 패키지 파일은 StorageGRID 시스템에서 데이터를 얻는 데 사용할 수 있는 암호화 키와 비밀번호가 포함되어 있으므로 보호되어야 합니다.

. 주기적으로 Decommission 페이지를 모니터링하여 선택한 모든 노드가 성공적으로 해제되었는지 확인하세요.
+
저장 노드를 해체하는 데는 며칠에서 몇 주가 걸릴 수 있습니다.  모든 작업이 완료되면 성공 메시지와 함께 노드 선택 목록이 다시 표시됩니다.  연결이 끊긴 스토리지 노드를 해제한 경우, 복구 작업이 시작되었다는 정보 메시지가 표시됩니다.

. 해제 절차의 일부로 노드가 자동으로 종료된 후 해제된 노드와 연결된 남아 있는 가상 머신이나 기타 리소스를 제거합니다.
+

CAUTION: 노드가 자동으로 종료될 때까지 이 단계를 수행하지 마세요.

. 스토리지 노드를 폐기하는 경우 폐기 프로세스 중에 자동으로 시작되는 *복제된 데이터* 및 *삭제 코드(EC) 데이터* 복구 작업의 상태를 모니터링합니다.


[role="tabbed-block"]
====
.복제된 데이터
--
* 복제된 수리에 대한 예상 완료율을 얻으려면 다음을 추가합니다. `show-replicated-repair-status` repair-data 명령에 대한 옵션입니다.
+
`repair-data show-replicated-repair-status`

* 수리가 완료되었는지 확인하려면:
+
.. *노드* > *_수리 중인 스토리지 노드_* > *ILM*을 선택합니다.
.. 평가 섹션에서 속성을 검토하세요.  수리가 완료되면 *대기 - 모두* 속성은 0개의 객체를 나타냅니다.


* 수리 과정을 더 자세히 모니터링하려면:
+
.. *지원* > *도구* > *그리드 토폴로지*를 선택하세요.
.. *_grid_* > *_수리 중인 스토리지 노드_* > *LDR* > *데이터 저장소*를 선택합니다.
.. 다음 속성을 조합하여 복제된 수리가 완료되었는지 가능한 한 정확하게 확인합니다.
+

NOTE: 카산드라 불일치가 존재할 수 있으며, 실패한 수리는 추적되지 않습니다.

+
*** *시도된 수리(XRPA)*: 이 속성을 사용하여 복제된 수리의 진행 상황을 추적합니다.  이 속성은 스토리지 노드가 고위험 객체를 복구하려고 할 때마다 증가합니다.  이 속성이 현재 스캔 기간(스캔 기간 - 추정* 속성에서 제공)보다 더 오랫동안 증가하지 않으면 ILM 스캔에서 어떤 노드에서도 복구가 필요한 고위험 개체를 찾지 못했음을 의미합니다.
+

NOTE: 고위험 물건은 완전히 분실될 위험이 있는 물건입니다.  여기에는 ILM 구성을 충족하지 못하는 객체는 포함되지 않습니다.

*** *스캔 기간 - 추정(XSCM)*: 이 속성을 사용하여 이전에 수집된 개체에 정책 변경이 적용되는 시기를 추정합니다.  *시도된 복구* 속성이 현재 스캔 기간보다 더 오랫동안 증가하지 않으면 복제된 복구가 수행되었을 가능성이 높습니다.  검사 기간은 변경될 수 있습니다.  *스캔 기간 - 추정(XSCM)* 속성은 전체 그리드에 적용되며 모든 노드 스캔 기간의 최대값입니다.  그리드의 *스캔 기간 - 예상* 속성 기록을 쿼리하여 적절한 기간을 결정할 수 있습니다.






--
.삭제 코드(EC) 데이터
--
삭제된 데이터의 복구를 모니터링하고 실패했을 수 있는 요청을 다시 시도하려면 다음을 수행합니다.

. 삭제된 데이터 복구 상태를 확인합니다.
+
** *지원* > *도구* > *측정항목*을 선택하면 현재 작업의 예상 완료 시간과 완료율을 볼 수 있습니다. 그런 다음 Grafana 섹션에서 *EC 개요*를 선택합니다. *Grid EC 작업 예상 완료 시간* 및 *Grid EC 작업 완료율* 대시보드를 살펴보세요.
** 이 명령을 사용하여 특정 상태를 확인하세요. `repair-data` 작업:
+
`repair-data show-ec-repair-status --repair-id repair ID`

** 이 명령을 사용하여 모든 수리 내용을 나열합니다.
+
`repair-data show-ec-repair-status`

+
출력에는 다음 정보가 나열됩니다. `repair ID` , 이전에 진행 중이거나 현재 진행 중인 모든 수리에 대해.



. 출력에 수리 작업이 실패한 것으로 표시되면 다음을 사용하십시오. `--repair-id` 수리를 다시 시도하는 옵션입니다.
+
이 명령은 복구 ID 6949309319275667690을 사용하여 실패한 노드 복구를 다시 시도합니다.

+
`repair-data start-ec-node-repair --repair-id 6949309319275667690`

+
이 명령은 복구 ID 6949309319275667690을 사용하여 실패한 볼륨 복구를 다시 시도합니다.

+
`repair-data start-ec-volume-repair --repair-id 6949309319275667690`



--
====
.당신이 완료한 후
연결이 끊긴 노드가 해제되고 모든 데이터 복구 작업이 완료되면 필요에 따라 연결된 그리드 노드를 해제할 수 있습니다.

그런 다음, 해체 절차를 완료한 후 다음 단계를 완료하세요.

* 폐기된 그리드 노드의 드라이브가 완전히 지워졌는지 확인하세요.  상업적으로 판매되는 데이터 삭제 도구나 서비스를 사용하여 드라이브에서 데이터를 영구적이고 안전하게 제거하세요.
* 어플라이언스 노드를 해제하고 해당 어플라이언스의 데이터가 노드 암호화를 사용하여 보호된 경우 StorageGRID Appliance Installer를 사용하여 키 관리 서버 구성을 지웁니다(KMS 지우기).  다른 그리드에 어플라이언스를 추가하려면 KMS 구성을 지워야 합니다. 지침은 다음을 참조하세요. https://docs.netapp.com/us-en/storagegrid-appliances/commonhardware/monitoring-node-encryption-in-maintenance-mode.html["유지 관리 모드에서 노드 암호화 모니터링"^] .

