---
permalink: maintain/considerations-for-removing-site.html 
sidebar: sidebar 
keywords: how to remove site 
summary: 사이트 폐쇄 절차를 사용하여 사이트를 제거하기 전에 고려 사항을 검토해야 합니다. 
---
= 사이트 제거 시 고려 사항
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
사이트 폐쇄 절차를 사용하여 사이트를 제거하기 전에 고려 사항을 검토해야 합니다.



== 사이트를 폐쇄하면 어떻게 되나요?

사이트를 해제하면 StorageGRID 해당 사이트의 모든 노드와 사이트 자체를 StorageGRID 시스템에서 영구적으로 제거합니다.

사이트 폐쇄 절차가 완료되면:

* 더 이상 StorageGRID 사용하여 사이트 또는 사이트의 노드를 보거나 액세스할 수 없습니다.
* 더 이상 해당 사이트를 참조하는 스토리지 풀이나 삭제 코딩 프로필을 사용할 수 없습니다.  StorageGRID 사이트를 폐기하면 자동으로 해당 스토리지 풀을 제거하고 삭제 코딩 프로필을 비활성화합니다.




== 연결된 사이트와 연결이 끊긴 사이트 해체 절차의 차이점

사이트 해제 절차를 사용하면 모든 노드가 StorageGRID 에 연결된 사이트를 제거할 수 있습니다(연결된 사이트 해제라고 함). 또는 모든 노드가 StorageGRID 에서 연결이 끊어진 사이트를 제거할 수 있습니다(연결이 끊어진 사이트 해제라고 함).  시작하기 전에 이러한 절차의 차이점을 이해해야 합니다.


NOTE: 사이트에 연결된 혼합이 포함되어 있는 경우(image:../media/icon_alert_green_checkmark.png["아이콘 경고 녹색 확인 표시"] ) 및 연결이 끊긴 노드(image:../media/icon_alarm_gray_administratively_down.png["아이콘 알람 회색 관리적으로 다운됨"] 또는image:../media/icon_alarm_blue_unknown.png["아이콘 알람 파란색 알 수 없음"] ), 모든 오프라인 노드를 다시 온라인으로 전환해야 합니다.

* 연결된 사이트 해제를 통해 StorageGRID 시스템에서 운영 사이트를 제거할 수 있습니다.  예를 들어, 작동하지만 더 이상 필요하지 않은 사이트를 제거하기 위해 연결된 사이트 해제를 수행할 수 있습니다.
* StorageGRID 연결된 사이트를 제거하면 ILM을 사용하여 사이트의 개체 데이터를 관리합니다.  연결된 사이트 해제를 시작하려면 먼저 모든 ILM 규칙에서 사이트를 제거하고 새 ILM 정책을 활성화해야 합니다.  객체 데이터를 마이그레이션하는 ILM 프로세스와 사이트를 제거하는 내부 프로세스는 동시에 발생할 수 있지만, 실제 해체 절차를 시작하기 전에 ILM 단계가 완료되도록 하는 것이 가장 좋습니다.
* 연결이 끊긴 사이트 해제를 통해 StorageGRID 시스템에서 오류가 발생한 사이트를 제거할 수 있습니다.  예를 들어, 화재나 홍수로 파괴된 사이트를 제거하기 위해 연결이 끊긴 사이트 해체를 수행할 수 있습니다.
+
StorageGRID 연결이 끊긴 사이트를 제거하는 경우 모든 노드를 복구할 수 없다고 간주하고 데이터를 보존하려고 시도하지 않습니다.  그러나 연결이 끊긴 사이트의 서비스 중단을 시작하기 전에 모든 ILM 규칙에서 사이트를 제거하고 새로운 ILM 정책을 활성화해야 합니다.

+

CAUTION: 연결이 끊긴 사이트의 서비스 중단 절차를 수행하기 전에 NetApp 계정 담당자에게 문의해야 합니다.  NetApp 사이트 폐쇄 마법사의 모든 단계를 활성화하기 전에 귀하의 요구 사항을 검토합니다.  사이트를 복구하거나 사이트에서 개체 데이터를 복구할 수 있다고 생각되면 연결이 끊긴 사이트의 서비스 중단을 시도해서는 안 됩니다.





== 연결된 사이트 또는 연결이 끊긴 사이트를 제거하기 위한 일반 요구 사항

연결된 사이트나 연결이 끊긴 사이트를 제거하기 전에 다음 요구 사항을 알아야 합니다.

* 기본 관리 노드가 포함된 사이트는 서비스 해제할 수 없습니다.
* 노드 중 하나라도 고가용성(HA) 그룹에 속하는 인터페이스를 갖고 있는 경우 사이트를 서비스 해제할 수 없습니다.  HA 그룹을 편집하여 노드 인터페이스를 제거하거나 전체 HA 그룹을 제거해야 합니다.
* 연결된 ( 혼합된 내용이 포함된 경우 사이트를 해제할 수 없습니다.image:../media/icon_alert_green_checkmark.png["아이콘 경고 녹색 확인 표시"] ) 및 연결이 끊겼습니다 (image:../media/icon_alarm_blue_unknown.png["아이콘 알람 파란색 알 수 없음"] 또는image:../media/icon_alarm_gray_administratively_down.png["아이콘 알람 회색 관리적으로 다운됨"] ) 노드.
* 다른 사이트의 노드가 연결 해제된 경우 사이트를 해제할 수 없습니다.image:../media/icon_alarm_blue_unknown.png["아이콘 알람 파란색 알 수 없음"] 또는image:../media/icon_alarm_gray_administratively_down.png["아이콘 알람 회색 관리적으로 다운됨"] ).
* ec-node-repair 작업이 진행 중이면 사이트 폐쇄 절차를 시작할 수 없습니다.  보다link:checking-data-repair-jobs.html["데이터 복구 작업 확인"] 삭제된 데이터의 복구를 추적합니다.
* 사이트 폐쇄 절차가 진행되는 동안:
+
** 폐쇄되는 사이트를 참조하는 ILM 규칙을 만들 수 없습니다.  기존 ILM 규칙을 편집하여 해당 사이트를 참조할 수도 없습니다.
** 확장이나 업그레이드 등 다른 유지 관리 절차를 수행할 수 없습니다.
+

NOTE: 연결된 사이트 해체 중에 다른 유지 관리 절차를 수행해야 하는 경우 다음을 수행할 수 있습니다.link:pausing-and-resuming-decommission-process-for-storage-nodes.html["스토리지 노드가 제거되는 동안 절차를 일시 중지합니다."] .  *일시 중지* 버튼은 ILM 평가 또는 삭제 코드화된 데이터 폐기 단계에 도달했을 때만 활성화됩니다. 그러나 ILM 평가(데이터 마이그레이션)는 백그라운드에서 계속 실행됩니다.  두 번째 유지 관리 절차가 완료되면 해체를 재개할 수 있습니다.

** 사이트 폐쇄 절차를 시작한 후 노드를 복구해야 하는 경우 지원팀에 문의해야 합니다.


* 한 번에 두 개 이상의 사이트를 해체할 수 없습니다.
* 사이트에 하나 이상의 관리 노드가 포함되어 있고 StorageGRID 시스템에 대해 SSO(Single Sign-On)가 활성화된 경우 Active Directory Federation Services(AD FS)에서 해당 사이트의 모든 신뢰 당사자 트러스트를 제거해야 합니다.




== 정보 수명 주기 관리(ILM) 요구 사항

사이트를 제거하는 과정에서 ILM 구성을 업데이트해야 합니다.  해체 현장 마법사는 다음 사항을 보장하기 위해 여러 가지 필수 단계를 안내합니다.

* 이 사이트는 어떠한 ILM 정책에도 해당되지 않습니다.  그렇다면 정책을 편집하거나 새로운 ILM 규칙으로 정책을 만들고 활성화해야 합니다.
* ILM 규칙은 어떤 정책에도 사용되지 않더라도 해당 사이트를 참조하지 않습니다.  해당 사이트를 참조하는 모든 규칙을 삭제하거나 편집해야 합니다.


StorageGRID 사이트를 폐기하면 해당 사이트를 참조하는 사용되지 않는 모든 삭제 코딩 프로필이 자동으로 비활성화되고, 해당 사이트를 참조하는 사용되지 않는 모든 스토리지 풀이 자동으로 삭제됩니다.  모든 스토리지 노드 스토리지 풀이 존재하는 경우(StorageGRID 11.6 및 이전 버전) 모든 사이트를 사용하므로 제거됩니다.


CAUTION: 사이트를 제거하기 전에 새로운 ILM 규칙을 만들고 새로운 ILM 정책을 활성화해야 할 수도 있습니다.  이 지침에서는 사용자가 ILM의 작동 방식을 잘 이해하고 스토리지 풀 생성, 삭제 코딩 프로필, ILM 규칙, ILM 정책 시뮬레이션 및 활성화에 익숙하다고 가정합니다. 보다 link:../ilm/index.html["ILM을 사용하여 객체 관리"] .



== 연결된 사이트의 객체 데이터에 대한 고려 사항

연결된 사이트 해체를 수행하는 경우 새 ILM 규칙과 새 ILM 정책을 만들 때 사이트의 기존 개체 데이터를 어떻게 처리할지 결정해야 합니다.  다음 중 하나 또는 둘 다 수행할 수 있습니다.

* 선택한 사이트의 개체 데이터를 그리드 내의 다른 하나 이상의 사이트로 이동합니다.
+
*데이터 이동 예시*: Sunnyvale에 새 사이트를 추가했기 때문에 Raleigh에 있는 사이트를 폐쇄하고 싶다고 가정해 보겠습니다.  이 예에서는 이전 사이트의 모든 개체 데이터를 새 사이트로 옮기려고 합니다.  ILM 규칙과 ILM 정책을 업데이트하기 전에 두 사이트의 용량을 검토해야 합니다.  Raleigh 사이트의 객체 데이터를 수용할 수 있는 충분한 용량이 Sunnyvale 사이트에 있는지 확인해야 하며, 향후 성장에 대비하여 Sunnyvale에 적절한 용량이 남아 있어야 합니다.

+

NOTE: 적절한 용량을 확보하려면 다음이 필요할 수 있습니다.link:../expand/index.html["그리드 확장"] 이 절차를 수행하기 전에 기존 사이트에 스토리지 볼륨이나 스토리지 노드를 추가하거나 새 사이트를 추가하세요.

* 선택한 사이트에서 개체 복사본을 삭제합니다.
+
*데이터 삭제 예시*: 현재 3개 사이트에 걸쳐 개체 데이터를 복제하기 위해 3개 사본 ILM 규칙을 사용하고 있다고 가정해 보겠습니다.  사이트를 해체하기 전에 동일한 2개 사본 ILM 규칙을 만들어 두 사이트에만 데이터를 저장할 수 있습니다.  2-복사 규칙을 사용하는 새로운 ILM 정책을 활성화하면 StorageGRID 해당 복사본이 더 이상 ILM 요구 사항을 충족하지 않으므로 세 번째 사이트에서 복사본을 삭제합니다.  하지만 객체 데이터는 계속 보호되며 나머지 두 사이트의 용량은 동일하게 유지됩니다.

+

CAUTION: 사이트 제거를 수용하기 위해 단일 사본 ILM 규칙을 만들지 마십시오.  특정 기간 동안 복제된 사본을 하나만 생성하는 ILM 규칙은 데이터가 영구적으로 손실될 위험에 처하게 합니다.  개체의 복제된 사본이 하나만 있는 경우 스토리지 노드에 장애가 발생하거나 심각한 오류가 발생하면 해당 개체는 손실됩니다.  업그레이드 등의 유지 관리 절차가 진행되는 동안에는 해당 객체에 대한 액세스 권한을 일시적으로 잃게 됩니다.





== 연결된 사이트 해체에 대한 추가 요구 사항

StorageGRID 연결된 사이트를 제거하기 전에 다음 사항을 확인해야 합니다.

* StorageGRID 시스템의 모든 노드는 연결 상태가 *연결됨*이어야 합니다.image:../media/icon_alert_green_checkmark.png["아이콘 경고 녹색 확인 표시"] ); 그러나 노드에는 활성 경고가 있을 수 있습니다.
+

NOTE: 하나 이상의 노드가 연결 해제된 경우 사이트 해체 마법사의 1~4단계를 완료할 수 있습니다.  하지만 모든 노드가 연결되지 않으면 해제 프로세스를 시작하는 마법사의 5단계를 완료할 수 없습니다.

* 제거하려는 사이트에 부하 분산에 사용되는 게이트웨이 노드 또는 관리 노드가 포함되어 있는 경우 다음을 수행해야 할 수 있습니다.link:../expand/index.html["그리드 확장"] 다른 사이트에 동등한 새 노드를 추가합니다.  사이트 폐쇄 절차를 시작하기 전에 클라이언트가 교체 노드에 연결할 수 있는지 확인하세요.
* 제거하려는 사이트에 고가용성(HA) 그룹에 속한 게이트웨이 노드나 관리 노드가 포함되어 있는 경우 사이트 서비스 해제 마법사의 1~4단계를 완료할 수 있습니다.  하지만 모든 HA 그룹에서 이러한 노드를 제거할 때까지는 해제 프로세스를 시작하는 마법사의 5단계를 완료할 수 없습니다.  기존 클라이언트가 사이트의 노드를 포함하는 HA 그룹에 연결하는 경우 사이트가 제거된 후에도 StorageGRID 에 계속 연결할 수 있는지 확인해야 합니다.
* 제거하려는 사이트의 스토리지 노드에 클라이언트가 직접 연결하는 경우 사이트 해체 절차를 시작하기 전에 다른 사이트의 스토리지 노드에 연결할 수 있는지 확인해야 합니다.
* 활성 ILM 정책의 변경으로 인해 이동되는 모든 개체 데이터를 수용할 수 있도록 나머지 사이트에 충분한 공간을 제공해야 합니다.  어떤 경우에는 다음이 필요할 수 있습니다.link:../expand/index.html["그리드 확장"] 연결된 사이트 해체를 완료하기 전에 스토리지 노드, 스토리지 볼륨 또는 새 사이트를 추가하세요.
* 해체 절차를 완료하는 데 충분한 시간을 허용해야 합니다.  StorageGRID ILM 프로세스는 사이트를 폐기하기 전에 사이트에서 개체 데이터를 이동하거나 삭제하는 데 며칠, 몇 주 또는 몇 달이 걸릴 수 있습니다.
+

NOTE: 사이트에서 개체 데이터를 이동하거나 삭제하는 작업은 사이트의 데이터 양, 시스템 부하, 네트워크 지연 시간, 필요한 ILM 변경 사항의 특성에 따라 며칠, 몇 주 또는 몇 달이 걸릴 수 있습니다.

* 가능하다면 가능한 한 빨리 해체 현장 마법사의 1~4단계를 완료하시기 바랍니다.  실제 해체 절차를 시작하기 전에(마법사의 5단계에서 *해체 시작*을 선택) 사이트에서 데이터를 이동하도록 허용하면 해체 절차가 더 빨리 완료되고 중단과 성능에 미치는 영향도 줄어듭니다.




== 연결이 끊긴 사이트 해체에 대한 추가 요구 사항

StorageGRID 연결이 끊긴 사이트를 제거하기 전에 다음 사항을 확인해야 합니다.

* NetApp 계정 담당자에게 문의하셨습니다.  NetApp 사이트 폐쇄 마법사의 모든 단계를 활성화하기 전에 귀하의 요구 사항을 검토합니다.
+

CAUTION: 사이트를 복구하거나 사이트에서 개체 데이터를 복구할 수 있다고 생각되면 연결이 끊긴 사이트를 해제하려고 시도해서는 안 됩니다. 보다 link:how-site-recovery-is-performed-by-technical-support.html["기술 지원이 사이트를 복구하는 방법"] .

* 사이트의 모든 노드는 다음 중 하나의 연결 상태를 가져야 합니다.
+
** *알려지지 않은* (image:../media/icon_alarm_blue_unknown.png["아이콘 알람 파란색 알 수 없음"] ): 알 수 없는 이유로 노드 연결이 끊어졌거나 노드의 서비스가 예기치 않게 중단되었습니다.  예를 들어, 노드의 서비스가 중지되었거나, 정전이나 예상치 못한 정전으로 인해 노드의 네트워크 연결이 끊어졌을 수 있습니다.
** *관리적으로 다운* (image:../media/icon_alarm_gray_administratively_down.png["아이콘 알람 회색 관리적으로 다운됨"] ): 예상되는 이유로 노드가 그리드에 연결되지 않았습니다.  예를 들어, 노드나 노드의 서비스가 정상적으로 종료되었습니다.


* 다른 모든 사이트의 모든 노드는 *연결됨*의 연결 상태를 가져야 합니다.image:../media/icon_alert_green_checkmark.png["아이콘 경고 녹색 확인 표시"] ); 그러나 다른 노드에는 활성 경고가 있을 수 있습니다.
* 더 이상 StorageGRID 사용하여 사이트에 저장된 모든 개체 데이터를 보거나 검색할 수 없다는 점을 이해해야 합니다.  StorageGRID 이 절차를 수행할 때 연결이 끊긴 사이트의 데이터를 보존하려고 하지 않습니다.
+

NOTE: ILM 규칙과 정책이 단일 사이트의 손실을 방지하도록 설계된 경우, 개체의 사본은 나머지 사이트에 여전히 존재합니다.

* 사이트에 객체의 유일한 사본이 있는 경우 해당 객체는 손실되어 검색할 수 없다는 점을 이해해야 합니다.




== 사이트를 제거할 때 일관성을 위한 고려 사항

S3 버킷의 일관성은 StorageGRID 클라이언트에게 객체 수집이 성공적이었음을 알리기 전에 모든 노드와 사이트에 객체 메타데이터를 완전히 복제하는지 여부를 결정합니다.  일관성은 여러 스토리지 노드와 사이트에서 객체의 가용성과 해당 객체의 일관성 간의 균형을 제공합니다.

StorageGRID 사이트를 제거하는 경우, 제거되는 사이트에 어떠한 데이터도 기록되지 않도록 해야 합니다.  결과적으로 각 버킷이나 컨테이너의 일관성이 일시적으로 무시됩니다.  사이트 해체 프로세스를 시작하면 StorageGRID 일시적으로 강력한 사이트 일관성을 사용하여 제거되는 사이트에 개체 메타데이터가 기록되는 것을 방지합니다.

이러한 임시 재정의로 인해 사이트 폐쇄 중에 발생하는 모든 클라이언트 쓰기, 업데이트 및 삭제 작업은 나머지 사이트에서 여러 노드를 사용할 수 없게 되면 실패할 수 있습니다.
