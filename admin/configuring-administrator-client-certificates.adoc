---
permalink: admin/configuring-administrator-client-certificates.html 
sidebar: sidebar 
keywords: client certificates, prometheus 
summary: 클라이언트 인증서를 사용하면 권한이 있는 외부 클라이언트가 StorageGRID Prometheus 데이터베이스에 액세스할 수 있으며, 이를 통해 외부 도구에서 StorageGRID 모니터링할 수 있는 안전한 방법을 제공합니다. 
---
= 클라이언트 인증서 구성
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
클라이언트 인증서를 사용하면 권한이 있는 외부 클라이언트가 StorageGRID Prometheus 데이터베이스에 액세스할 수 있으며, 이를 통해 외부 도구에서 StorageGRID 모니터링할 수 있는 안전한 방법을 제공합니다.

외부 모니터링 도구를 사용하여 StorageGRID 에 액세스해야 하는 경우 Grid Manager를 사용하여 클라이언트 인증서를 업로드하거나 생성하고 인증서 정보를 외부 도구에 복사해야 합니다.

보다link:using-storagegrid-security-certificates.html["보안 인증서 관리"] 그리고link:configuring-custom-server-certificate-for-grid-manager-tenant-manager.html["사용자 정의 서버 인증서 구성"] .


NOTE: 실패한 서버 인증서로 인해 작업이 중단되지 않도록, 이 서버 인증서가 만료되려고 할 때 *인증서 페이지에서 구성된 클라이언트 인증서 만료* 알림이 트리거됩니다. 필요에 따라 *구성* > *보안* > *인증서*를 선택하고 클라이언트 탭에서 클라이언트 인증서의 만료 날짜를 확인하여 현재 인증서가 만료되는 시기를 확인할 수 있습니다.


NOTE: 특별히 구성된 어플라이언스 노드의 데이터를 보호하기 위해 키 관리 서버(KMS)를 사용하는 경우 해당 정보를 참조하세요.link:kms-adding.html["KMS 클라이언트 인증서 업로드"] .

.시작하기 전에
* 루트 접근 권한이 있습니다.
* 다음을 사용하여 Grid Manager에 로그인했습니다.link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"] .
* 클라이언트 인증서를 구성하려면:
+
** 관리 노드의 IP 주소 또는 도메인 이름이 있습니다.
** StorageGRID 관리 인터페이스 인증서를 구성한 경우 관리 인터페이스 인증서를 구성하는 데 사용되는 CA, 클라이언트 인증서 및 개인 키가 있습니다.
** 자신의 인증서를 업로드하려면 인증서의 개인 키를 로컬 컴퓨터에서 사용할 수 있어야 합니다.
** 개인 키는 생성 당시에 저장되거나 기록되어야 합니다.  원래 개인 키가 없으면 새 개인 키를 만들어야 합니다.


* 클라이언트 인증서를 편집하려면:
+
** 관리 노드의 IP 주소 또는 도메인 이름이 있습니다.
** 자신의 인증서나 새로운 인증서를 업로드하려면 개인 키, 클라이언트 인증서, CA(사용하는 경우)를 로컬 컴퓨터에서 사용할 수 있습니다.






== 클라이언트 인증서 추가

클라이언트 인증서를 추가하려면 다음 절차 중 하나를 사용하세요.

* <<관리 인터페이스 인증서가 이미 구성되었습니다.>>
* <<CA에서 발급한 클라이언트 인증서>>
* <<Grid Manager에서 생성된 인증서>>




=== 관리 인터페이스 인증서가 이미 구성되었습니다.

고객이 제공한 CA, 클라이언트 인증서 및 개인 키를 사용하여 관리 인터페이스 인증서가 이미 구성된 경우 이 절차를 사용하여 클라이언트 인증서를 추가합니다.

.단계
. 그리드 관리자에서 *구성* > *보안* > *인증서*를 선택한 다음 *클라이언트* 탭을 선택합니다.
. *추가*를 선택하세요.
. 인증서 이름을 입력하세요.
. 외부 모니터링 도구를 사용하여 Prometheus 메트릭에 액세스하려면 *Prometheus 허용*을 선택하세요.
. *계속*을 선택하세요.
. *인증서 첨부* 단계에서는 관리 인터페이스 인증서를 업로드합니다.
+
.. *증명서 업로드*를 선택하세요.
.. *찾아보기*를 선택하고 관리 인터페이스 인증서 파일을 선택합니다.(`.pem` ).
+
*** *클라이언트 인증서 세부 정보*를 선택하면 인증서 메타데이터와 인증서 PEM이 표시됩니다.
*** 다른 곳에 붙여넣기 위해 인증서 내용을 복사하려면 *인증서 PEM 복사*를 선택하세요.


.. *만들기*를 선택하여 Grid Manager에 인증서를 저장합니다.
+
새로운 인증서가 클라이언트 탭에 나타납니다.



. <<configure-external-monitoring-tool,외부 모니터링 도구 구성>>Grafana와 같은




=== CA에서 발급한 클라이언트 인증서

관리 인터페이스 인증서가 구성되지 않았고 CA에서 발급한 클라이언트 인증서와 개인 키를 사용하는 Prometheus용 클라이언트 인증서를 추가하려는 경우 이 절차를 사용하여 관리자 클라이언트 인증서를 추가합니다.

.단계
. 다음 단계를 수행하세요.link:configuring-custom-server-certificate-for-grid-manager-tenant-manager.html["관리 인터페이스 인증서 구성"] .
. 그리드 관리자에서 *구성* > *보안* > *인증서*를 선택한 다음 *클라이언트* 탭을 선택합니다.
. *추가*를 선택하세요.
. 인증서 이름을 입력하세요.
. 외부 모니터링 도구를 사용하여 Prometheus 메트릭에 액세스하려면 *Prometheus 허용*을 선택하세요.
. *계속*을 선택하세요.
. *인증서 첨부* 단계에서는 클라이언트 인증서, 개인 키, CA 번들 파일을 업로드합니다.
+
.. *증명서 업로드*를 선택하세요.
.. *찾아보기*를 선택하고 클라이언트 인증서, 개인 키 및 CA 번들 파일을 선택합니다.(`.pem` ).
+
*** *클라이언트 인증서 세부 정보*를 선택하면 인증서 메타데이터와 인증서 PEM이 표시됩니다.
*** 다른 곳에 붙여넣기 위해 인증서 내용을 복사하려면 *인증서 PEM 복사*를 선택하세요.


.. *만들기*를 선택하여 Grid Manager에 인증서를 저장합니다.
+
새로운 인증서가 클라이언트 탭에 나타납니다.



. <<configure-external-monitoring-tool,외부 모니터링 도구 구성>>Grafana와 같은




=== Grid Manager에서 생성된 인증서

관리 인터페이스 인증서가 구성되지 않았고 Grid Manager의 인증서 생성 기능을 사용하여 Prometheus에 대한 클라이언트 인증서를 추가하려는 경우 이 절차를 사용하여 관리자 클라이언트 인증서를 추가합니다.

.단계
. 그리드 관리자에서 *구성* > *보안* > *인증서*를 선택한 다음 *클라이언트* 탭을 선택합니다.
. *추가*를 선택하세요.
. 인증서 이름을 입력하세요.
. 외부 모니터링 도구를 사용하여 Prometheus 메트릭에 액세스하려면 *Prometheus 허용*을 선택하세요.
. *계속*을 선택하세요.
. *인증서 첨부* 단계에서 *인증서 생성*을 선택합니다.
. 인증서 정보를 지정하세요:
+
** *주체* (선택 사항): 인증서 소유자의 X.509 주체 또는 고유 이름(DN).
** *유효일수*: 생성된 인증서의 유효일수는 생성된 시점부터 시작됩니다.
** *키 사용 확장 추가*: 선택하는 경우(기본값이며 권장), 키 사용 확장과 확장된 키 사용 확장이 생성된 인증서에 추가됩니다.
+
이러한 확장은 인증서에 포함된 키의 목적을 정의합니다.

+

NOTE: 인증서에 이러한 확장자가 포함되어 있는 경우 이전 클라이언트에서 연결 문제가 발생하지 않는 한 이 확인란을 선택된 상태로 두세요.



. *생성*을 선택하세요.
. [[client_cert_details]] *클라이언트 인증서 세부 정보*를 선택하여 인증서 메타데이터와 인증서 PEM을 표시합니다.
+

TIP: 대화 상자를 닫은 후에는 인증서 개인 키를 볼 수 없습니다.  키를 안전한 곳에 복사하거나 다운로드하세요.

+
** 다른 곳에 붙여넣기 위해 인증서 내용을 복사하려면 *인증서 PEM 복사*를 선택하세요.
** 인증서 파일을 저장하려면 *인증서 다운로드*를 선택하세요.
+
인증서 파일 이름과 다운로드 위치를 지정하세요.  파일을 확장자로 저장하세요 `.pem` .

+
예:  `storagegrid_certificate.pem`

** 다른 곳에 붙여넣기 위해 인증서 개인 키를 복사하려면 *개인 키 복사*를 선택하세요.
** 개인 키를 파일로 저장하려면 *개인 키 다운로드*를 선택하세요.
+
개인 키 파일 이름과 다운로드 위치를 지정하세요.



. *만들기*를 선택하여 Grid Manager에 인증서를 저장합니다.
+
새로운 인증서가 클라이언트 탭에 나타납니다.

. 그리드 관리자에서 *구성* > *보안* > *인증서*를 선택한 다음 *전역* 탭을 선택합니다.
. *관리 인터페이스 인증서*를 선택하세요.
. *사용자 정의 인증서 사용*을 선택하세요.
. certificate.pem 및 private_key.pem 파일을 업로드하세요.<<client_cert_details,클라이언트 인증서 세부 정보>> 단계.  CA 번들을 업로드할 필요가 없습니다.
+
.. *인증서 업로드*를 선택한 다음 *계속*을 선택합니다.
.. 각 인증서 파일을 업로드하세요(`.pem` ).
.. *저장*을 선택하여 인증서를 Grid Manager에 저장합니다.
+
새로운 인증서가 관리 인터페이스 인증서 페이지에 나타납니다.



. <<configure-external-monitoring-tool,외부 모니터링 도구 구성>>Grafana와 같은




=== [[configure-external-monitoring-tool]]외부 모니터링 도구 구성

.단계
. Grafana와 같은 외부 모니터링 도구에서 다음 설정을 구성합니다.
+
.. *이름*: 연결 이름을 입력하세요.
+
StorageGRID 이 정보가 필요하지 않지만 연결을 테스트하려면 이름을 제공해야 합니다.

.. *URL*: 관리 노드의 도메인 이름이나 IP 주소를 입력하세요.  HTTPS와 포트 9091을 지정하세요.
+
예:  `+https://admin-node.example.com:9091+`

.. *TLS 클라이언트 인증* 및 *CA 인증서 사용*을 활성화합니다.
.. TLS/SSL 인증 세부 정보에서 다음을 복사하여 붙여넣습니다. +
+
*** **CA 인증서**에 대한 관리 인터페이스 CA 인증서
*** **클라이언트 인증서**에 대한 클라이언트 인증서
*** **클라이언트 키**에 대한 개인 키


.. *서버 이름*: 관리 노드의 도메인 이름을 입력하세요.
+
ServerName은 관리 인터페이스 인증서에 나타나는 도메인 이름과 일치해야 합니다.



. StorageGRID 또는 로컬 파일에서 복사한 인증서와 개인 키를 저장하고 테스트합니다.
+
이제 외부 모니터링 도구를 사용하여 StorageGRID 에서 Prometheus 메트릭에 액세스할 수 있습니다.

+
측정항목에 대한 정보는 다음을 참조하세요.link:../monitor/index.html["StorageGRID 모니터링 지침"] .





== 클라이언트 인증서 편집

관리자 클라이언트 인증서를 편집하여 인증서 이름을 변경하고, Prometheus 액세스를 활성화 또는 비활성화하고, 현재 인증서가 만료되면 새 인증서를 업로드할 수 있습니다.

.단계
. *구성* > *보안* > *인증서*를 선택한 다음 *클라이언트* 탭을 선택합니다.
+
인증서 만료 날짜와 Prometheus 액세스 권한이 표에 나와 있습니다.  인증서가 곧 만료되거나 이미 만료된 경우, 표에 메시지가 나타나고 알림이 트리거됩니다.

. 편집하려는 인증서를 선택하세요.
. *편집*을 선택한 다음 *이름 및 권한 편집*을 선택하세요.
. 인증서 이름을 입력하세요.
. 외부 모니터링 도구를 사용하여 Prometheus 메트릭에 액세스하려면 *Prometheus 허용*을 선택하세요.
. *계속*을 선택하여 그리드 관리자에 인증서를 저장합니다.
+
업데이트된 인증서는 클라이언트 탭에 표시됩니다.





== 새로운 클라이언트 인증서 첨부

현재 인증서가 만료되면 새로운 인증서를 업로드할 수 있습니다.

.단계
. *구성* > *보안* > *인증서*를 선택한 다음 *클라이언트* 탭을 선택합니다.
+
인증서 만료 날짜와 Prometheus 액세스 권한이 표에 나와 있습니다.  인증서가 곧 만료되거나 이미 만료된 경우, 표에 메시지가 나타나고 알림이 트리거됩니다.

. 편집하려는 인증서를 선택하세요.
. *편집*을 선택한 다음 편집 옵션을 선택하세요.
+
[role="tabbed-block"]
====
.인증서 업로드
--
인증서 텍스트를 복사하여 다른 곳에 붙여넣으세요.

.. *인증서 업로드*를 선택한 다음 *계속*을 선택합니다.
.. 클라이언트 인증서 이름을 업로드하세요(`.pem` ).
+
*클라이언트 인증서 세부 정보*를 선택하면 인증서 메타데이터와 인증서 PEM이 표시됩니다.

+
*** 인증서 파일을 저장하려면 *인증서 다운로드*를 선택하세요.
+
인증서 파일 이름과 다운로드 위치를 지정하세요.  파일을 확장자로 저장하세요 `.pem` .

+
예:  `storagegrid_certificate.pem`

*** 다른 곳에 붙여넣기 위해 인증서 내용을 복사하려면 *인증서 PEM 복사*를 선택하세요.


.. *만들기*를 선택하여 Grid Manager에 인증서를 저장합니다.
+
업데이트된 인증서는 클라이언트 탭에 표시됩니다.



--
.인증서 생성
--
다른 곳에 붙여넣을 수 있는 인증서 텍스트를 생성합니다.

.. *인증서 생성*을 선택하세요.
.. 인증서 정보를 지정하세요:
+
*** *주체* (선택 사항): 인증서 소유자의 X.509 주체 또는 고유 이름(DN).
*** *유효일수*: 생성된 인증서의 유효일수는 생성된 시점부터 시작됩니다.
*** *키 사용 확장 추가*: 선택하는 경우(기본값이며 권장), 키 사용 확장과 확장된 키 사용 확장이 생성된 인증서에 추가됩니다.
+
이러한 확장은 인증서에 포함된 키의 목적을 정의합니다.

+

NOTE: 인증서에 이러한 확장자가 포함되어 있는 경우 이전 클라이언트에서 연결 문제가 발생하지 않는 한 이 확인란을 선택된 상태로 두세요.



.. *생성*을 선택하세요.
.. *클라이언트 인증서 세부 정보*를 선택하면 인증서 메타데이터와 인증서 PEM이 표시됩니다.
+

TIP: 대화 상자를 닫은 후에는 인증서 개인 키를 볼 수 없습니다.  키를 안전한 곳에 복사하거나 다운로드하세요.

+
*** 다른 곳에 붙여넣기 위해 인증서 내용을 복사하려면 *인증서 PEM 복사*를 선택하세요.
*** 인증서 파일을 저장하려면 *인증서 다운로드*를 선택하세요.
+
인증서 파일 이름과 다운로드 위치를 지정하세요.  파일을 확장자로 저장하세요 `.pem` .

+
예:  `storagegrid_certificate.pem`

*** 다른 곳에 붙여넣기 위해 인증서 개인 키를 복사하려면 *개인 키 복사*를 선택하세요.
*** 개인 키를 파일로 저장하려면 *개인 키 다운로드*를 선택하세요.
+
개인 키 파일 이름과 다운로드 위치를 지정하세요.



.. *만들기*를 선택하여 Grid Manager에 인증서를 저장합니다.
+
새로운 인증서가 클라이언트 탭에 나타납니다.



--
====




== 클라이언트 인증서 다운로드 또는 복사

클라이언트 인증서를 다운로드하거나 복사하여 다른 곳에서 사용할 수 있습니다.

.단계
. *구성* > *보안* > *인증서*를 선택한 다음 *클라이언트* 탭을 선택합니다.
. 복사하거나 다운로드할 인증서를 선택하세요.
. 인증서를 다운로드하거나 복사하세요.
+
[role="tabbed-block"]
====
.인증서 파일 다운로드
--
인증서를 다운로드하세요 `.pem` 파일.

.. *인증서 다운로드*를 선택하세요.
.. 인증서 파일 이름과 다운로드 위치를 지정하세요.  파일을 확장자로 저장하세요 `.pem` .
+
예:  `storagegrid_certificate.pem`



--
.인증서 사본
--
인증서 텍스트를 복사하여 다른 곳에 붙여넣으세요.

.. *인증서 PEM 복사*를 선택하세요.
.. 복사한 인증서를 텍스트 편집기에 붙여넣습니다.
.. 텍스트 파일을 확장자로 저장하세요 `.pem` .
+
예:  `storagegrid_certificate.pem`



--
====




== 클라이언트 인증서 제거

관리자 클라이언트 인증서가 더 이상 필요하지 않으면 제거할 수 있습니다.

.단계
. *구성* > *보안* > *인증서*를 선택한 다음 *클라이언트* 탭을 선택합니다.
. 제거할 인증서를 선택하세요.
. *삭제*를 선택한 후 확인하세요.



NOTE: 최대 10개의 인증서를 제거하려면 클라이언트 탭에서 제거할 각 인증서를 선택한 다음 *작업* > *삭제*를 선택합니다.

인증서가 제거된 후, 해당 인증서를 사용한 클라이언트는 StorageGRID Prometheus 데이터베이스에 액세스하기 위해 새 클라이언트 인증서를 지정해야 합니다.
