---
permalink: rhel/node-container-migration-requirements.html 
sidebar: sidebar 
keywords: how to migrate a node 
summary: 노드 마이그레이션 기능을 사용하면 한 호스트에서 다른 호스트로 노드를 수동으로 이동할 수 있습니다.  일반적으로 두 호스트는 동일한 물리적 데이터 센터에 있습니다. 
---
= 노드 컨테이너 마이그레이션 요구 사항
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
노드 마이그레이션 기능을 사용하면 한 호스트에서 다른 호스트로 노드를 수동으로 이동할 수 있습니다.  일반적으로 두 호스트는 동일한 물리적 데이터 센터에 있습니다.

노드 마이그레이션을 통해 그리드 운영을 방해하지 않고 물리적 호스트 유지 관리를 수행할 수 있습니다.  물리적 호스트를 오프라인으로 전환하기 전에 모든 StorageGRID 노드를 한 번에 하나씩 다른 호스트로 이동합니다.  노드를 마이그레이션하는 데는 각 노드에 짧은 다운타임만 필요하며 그리드 서비스의 운영이나 가용성에 영향을 미치지 않습니다.

StorageGRID 노드 마이그레이션 기능을 사용하려면 배포가 다음과 같은 추가 요구 사항을 충족해야 합니다.

* 단일 물리적 데이터 센터의 호스트 전체에서 일관된 네트워크 인터페이스 이름
* 단일 물리적 데이터 센터의 모든 호스트가 액세스할 수 있는 StorageGRID 메타데이터 및 개체 저장소 볼륨을 위한 공유 스토리지입니다.  예를 들어 NetApp E-Series 스토리지 어레이를 사용할 수 있습니다.


가상 호스트를 사용하고 기본 하이퍼바이저 계층이 VM 마이그레이션을 지원하는 경우 StorageGRID 의 노드 마이그레이션 기능 대신 이 기능을 사용하는 것이 좋습니다.  이 경우에는 이러한 추가 요구 사항을 무시할 수 있습니다.

마이그레이션이나 하이퍼바이저 유지 관리를 수행하기 전에 노드를 정상적으로 종료하세요. 지침을 참조하세요link:../maintain/shutting-down-grid-node.html["그리드 노드 종료"] .



== VMware Live Migration이 지원되지 않습니다.

VMware VM에서 베어 메탈 설치를 수행할 때 OpenStack Live Migration과 VMware Live vMotion은 가상 머신 클록 시간을 점프하게 하며 모든 유형의 그리드 노드에서 지원되지 않습니다.  드물지만 잘못된 시계 시간으로 인해 데이터 손실이나 구성 업데이트가 발생할 수 있습니다.

저온 이동이 지원됩니다.  콜드 마이그레이션에서는 호스트 간에 마이그레이션하기 전에 StorageGRID 노드를 종료합니다. 지침을 참조하세요link:../maintain/shutting-down-grid-node.html["그리드 노드 종료"] .



== 일관된 네트워크 인터페이스 이름

한 호스트에서 다른 호스트로 노드를 이동하려면 StorageGRID 호스트 서비스는 노드가 현재 위치에서 가지고 있는 외부 네트워크 연결을 새 위치에서도 복제할 수 있다는 확신을 가져야 합니다.  호스트에서 일관된 네트워크 인터페이스 이름을 사용하면 이러한 확신을 얻을 수 있습니다.

예를 들어, Host1에서 실행되는 StorageGRID NodeA가 다음 인터페이스 매핑으로 구성되었다고 가정해 보겠습니다.

image::../media/eth0_bond.gif[이 이미지는 주변 텍스트로 설명됩니다.]

화살표의 왼쪽은 StorageGRID 컨테이너 내부에서 본 기존 인터페이스(각각 그리드, 관리자, 클라이언트 네트워크 인터페이스)에 해당합니다.  화살표의 오른쪽은 이러한 네트워크를 제공하는 실제 호스트 인터페이스에 해당하며, 이는 동일한 물리적 인터페이스 본드에 종속된 세 개의 VLAN 인터페이스입니다.

이제 NodeA를 Host2로 마이그레이션하고 싶다고 가정해 보겠습니다.  Host2에 bond0.1001, bond0.1002, bond0.1003이라는 이름의 인터페이스가 있는 경우, 시스템은 해당 이름의 인터페이스가 Host1에서와 동일한 연결성을 Host2에서 제공한다고 가정하고 이동을 허용합니다.  Host2에 동일한 이름의 인터페이스가 없으면 이동이 허용되지 않습니다.

여러 호스트에서 일관된 네트워크 인터페이스 명명을 달성하는 방법은 여러 가지가 있습니다. 다음을 참조하세요.link:configuring-host-network.html["호스트 네트워크 구성"] 몇 가지 예를 들어보겠습니다.



== 공유 스토리지

빠르고 오버헤드가 낮은 노드 마이그레이션을 달성하기 위해 StorageGRID 노드 마이그레이션 기능은 노드 데이터를 물리적으로 이동하지 않습니다.  대신, 노드 마이그레이션은 다음과 같이 내보내기 및 가져오기 작업의 쌍으로 수행됩니다.

. "노드 내보내기" 작업 동안, HostA에서 실행되는 노드 컨테이너에서 소량의 지속적 상태 데이터가 추출되어 해당 노드의 시스템 데이터 볼륨에 캐시됩니다.  그런 다음 HostA의 노드 컨테이너가 인스턴스화 해제됩니다.
. "노드 가져오기" 작업 중에 HostA에서 적용되었던 것과 동일한 네트워크 인터페이스와 블록 스토리지 매핑을 사용하는 HostB의 노드 컨테이너가 인스턴스화됩니다.  그런 다음 캐시된 영구 상태 데이터가 새 인스턴스에 삽입됩니다.


이러한 운영 모드에서는 마이그레이션이 허용되고 작동하려면 모든 노드의 시스템 데이터와 개체 스토리지 볼륨에 HostA와 HostB에서 모두 액세스할 수 있어야 합니다.  또한, HostA와 HostB의 동일한 LUN을 참조하는 것이 보장되는 이름을 사용하여 노드에 매핑되어야 합니다.

다음 예에서는 호스트에서 DM 다중 경로가 사용 중이고 별칭 필드가 사용된 StorageGRID 스토리지 노드에 대한 블록 장치 매핑을 위한 하나의 솔루션을 보여줍니다. `/etc/multipath.conf` 모든 호스트에서 사용할 수 있는 일관되고 친숙한 블록 장치 이름을 제공합니다.

image::../media/block_device_mapping_rhel.gif[이 이미지는 주변 텍스트로 설명됩니다.]
