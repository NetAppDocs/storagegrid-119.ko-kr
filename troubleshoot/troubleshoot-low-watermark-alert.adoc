---
permalink: troubleshoot/troubleshoot-low-watermark-alert.html 
sidebar: sidebar 
keywords: troubleshoot low soft read-only watermark override alert, optimized watermarks 
summary: 저장소 볼륨 워터마크에 사용자 지정 값을 사용하는 경우 낮은 읽기 전용 워터마크 재정의 경고를 해결해야 할 수도 있습니다.  가능하다면 최적화된 값을 사용하도록 시스템을 업데이트해야 합니다. 
---
= 낮은 읽기 전용 워터마크 재정의 경고 문제 해결
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
저장소 볼륨 워터마크에 사용자 지정 값을 사용하는 경우 *낮은 읽기 전용 워터마크 재정의* 경고를 해결해야 할 수도 있습니다.  가능하다면 최적화된 값을 사용하도록 시스템을 업데이트해야 합니다.

이전 릴리스에서는 세 가지link:../admin/what-storage-volume-watermarks-are.html["저장 볼륨 워터마크"] 전역 설정이었습니다. 즉, 모든 스토리지 노드의 모든 스토리지 볼륨에 동일한 값이 적용되었습니다.  StorageGRID 11.6부터 소프트웨어는 스토리지 노드의 크기와 볼륨의 상대적 용량을 기반으로 각 스토리지 볼륨에 대한 워터마크를 최적화할 수 있습니다.

StorageGRID 11.6 이상으로 업그레이드하면 다음 중 하나가 해당되지 않는 한 모든 스토리지 볼륨에 최적화된 읽기 전용 및 읽기-쓰기 워터마크가 자동으로 적용됩니다.

* 최적화된 워터마크를 적용하면 시스템 용량이 거의 가득 차서 새로운 데이터를 수용할 수 없습니다.  이 경우 StorageGRID 워터마크 설정을 변경하지 않습니다.
* 이전에 저장 볼륨 워터마크를 사용자 지정 값으로 설정했습니다.  StorageGRID 사용자 정의 워터마크 설정을 최적화된 값으로 재정의하지 않습니다.  하지만 스토리지 볼륨 소프트 읽기 전용 워터마크에 대한 사용자 지정 값이 너무 작으면 StorageGRID *낮은 읽기 전용 워터마크 재정의* 경고가 발생할 수 있습니다.




== 경고를 이해하세요

스토리지 볼륨 워터마크에 사용자 지정 값을 사용하는 경우 하나 이상의 스토리지 노드에 대해 *낮은 읽기 전용 워터마크 재정의* 경고가 트리거될 수 있습니다.

경고의 각 인스턴스는 스토리지 볼륨 소프트 읽기 전용 워터마크의 사용자 지정 값이 해당 스토리지 노드에 대해 최적화된 최소 값보다 작음을 나타냅니다.  사용자 지정 설정을 계속 사용할 경우 스토리지 노드가 읽기 전용 상태로 안전하게 전환되기 전에 공간이 심각하게 부족해질 수 있습니다.  노드가 용량에 도달하면 일부 스토리지 볼륨에 액세스할 수 없게 될 수 있습니다(자동으로 마운트 해제됨).

예를 들어, 이전에 저장 볼륨 소프트 읽기 전용 워터마크를 5GB로 설정했다고 가정해 보겠습니다.  이제 StorageGRID 스토리지 노드 A의 4개 스토리지 볼륨에 대해 다음과 같은 최적화된 값을 계산했다고 가정해 보겠습니다.

[cols="2a,2a"]
|===


 a| 
제0권
 a| 
12GB



 a| 
제1권
 a| 
12GB



 a| 
제2권
 a| 
11GB



 a| 
제3권
 a| 
15GB

|===
사용자 지정 워터마크(5GB)가 해당 노드의 모든 볼륨에 대한 최소 최적화 값(11GB)보다 작기 때문에 스토리지 노드 A에 대해 *낮은 읽기 전용 워터마크 재정의* 경고가 트리거됩니다.  사용자 지정 설정을 계속 사용하면 노드가 읽기 전용 상태로 안전하게 전환되기 전에 공간이 심각하게 부족해질 수 있습니다.



== 경고를 해결하세요

하나 이상의 *읽기 전용 워터마크 무시* 경고가 발생한 경우 다음 단계를 따르세요.  현재 사용자 지정 워터마크 설정을 사용하고 있고 알림이 발생하지 않은 경우에도 최적화된 설정을 사용하려는 경우에도 이 지침을 사용할 수 있습니다.

.시작하기 전에
* StorageGRID 11.6 이상으로 업그레이드를 완료했습니다.
* 다음을 사용하여 Grid Manager에 로그인했습니다.link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"] .
* 당신은 가지고있다link:../admin/admin-group-permissions.html["루트 액세스 권한"] .


.이 작업에 관하여
사용자 지정 워터마크 설정을 새 워터마크 재정의로 업데이트하면 *읽기 전용 워터마크 재정의 낮음* 경고를 해결할 수 있습니다.  하지만 하나 이상의 스토리지 노드가 거의 가득 찼거나 특별한 ILM 요구 사항이 있는 경우 먼저 최적화된 스토리지 워터마크를 보고 이를 사용해도 안전한지 확인해야 합니다.



=== 전체 그리드에 대한 객체 데이터 사용량 평가

.단계
. *노드*를 선택하세요.
. 그리드의 각 사이트에 대해 노드 목록을 확장합니다.
. 모든 사이트의 각 스토리지 노드에 대해 *사용된 개체 데이터* 열에 표시된 백분율 값을 검토합니다.
+
image::../media/nodes_page_object_data_used_with_alert.png[3개의 SN에 사용된 객체 데이터를 보여주는 노드 페이지]

. 다음 단계에 따라 진행하세요.
+
.. 스토리지 노드가 가득 차지 않은 경우(예: 모든 *사용된 개체 데이터* 값이 80% 미만인 경우) 재정의 설정을 사용할 수 있습니다. 로 가다<<use-optimized-watermarks,최적화된 워터마크를 사용하세요>> .
.. ILM 규칙이 엄격한 수집 동작을 사용하거나 특정 스토리지 풀이 거의 가득 찬 경우 다음 단계를 수행하십시오.<<view-optimized-watermarks,최적화된 스토리지 워터마크 보기>> 그리고<<determine-optimized-watermarks,최적화된 워터마크를 사용할 수 있는지 확인하세요>> .






=== [[view-optimized-watermarks]]최적화된 저장 워터마크 보기

StorageGRID 두 가지 Prometheus 메트릭을 사용하여 스토리지 볼륨 소프트 읽기 전용 워터마크에 대해 계산한 최적화된 값을 보여줍니다.  그리드에서 각 스토리지 노드에 대한 최소 및 최대 최적화 값을 볼 수 있습니다.

.단계
. *지원* > *도구* > *측정항목*을 선택하세요.
. Prometheus 섹션에서 Prometheus 사용자 인터페이스에 액세스하는 링크를 선택합니다.
. 권장되는 최소 소프트 읽기 전용 워터마크를 보려면 다음 Prometheus 메트릭을 입력하고 *실행*을 선택하세요.
+
`storagegrid_storage_volume_minimum_optimized_soft_readonly_watermark`

+
마지막 열은 각 스토리지 노드의 모든 스토리지 볼륨에 대한 소프트 읽기 전용 워터마크의 최소 최적화 값을 보여줍니다.  이 값이 스토리지 볼륨 소프트 읽기 전용 워터마크에 대한 사용자 지정 설정보다 큰 경우, 스토리지 노드에 대해 *낮은 읽기 전용 워터마크 재정의* 경고가 트리거됩니다.

. 권장되는 최대 소프트 읽기 전용 워터마크를 보려면 다음 Prometheus 메트릭을 입력하고 *실행*을 선택하세요.
+
`storagegrid_storage_volume_maximum_optimized_soft_readonly_watermark`

+
마지막 열은 각 스토리지 노드의 모든 스토리지 볼륨에 대한 소프트 읽기 전용 워터마크의 최대 최적화 값을 보여줍니다.

. [[maximum_optimized_value]]각 스토리지 노드에 대한 최대 최적화 값을 기록해 두세요.




=== [[determine-optimized-watermarks]]최적화된 워터마크를 사용할 수 있는지 확인하세요

.단계
. *노드*를 선택하세요.
. 각 온라인 스토리지 노드에 대해 이 단계를 반복합니다.
+
.. *_스토리지 노드_* > *스토리지*를 선택합니다.
.. 아래로 스크롤하여 Object Stores 테이블을 찾습니다.
.. 각 개체 저장소(볼륨)의 *사용 가능* 값을 해당 저장소 노드에 대해 기록한 최대 최적화 워터마크와 비교합니다.


. 모든 온라인 스토리지 노드의 하나 이상의 볼륨에 해당 노드의 최대 최적화 워터마크보다 더 많은 공간이 있는 경우 다음으로 이동하십시오.<<use-optimized-watermarks,최적화된 워터마크를 사용하세요>> 최적화된 워터마크를 사용하기 시작하세요.
+
그렇지 않은 경우 가능한 한 빨리 그리드를 확장하세요.  어느 하나link:../expand/adding-storage-volumes-to-storage-nodes.html["스토리지 볼륨 추가"] 기존 노드 또는link:../expand/adding-grid-nodes-to-existing-site-or-adding-new-site.html["새로운 스토리지 노드 추가"] .  그런 다음 이동하세요<<use-optimized-watermarks,최적화된 워터마크를 사용하세요>> 워터마크 설정을 업데이트합니다.

. 저장 볼륨 워터마크에 대해 사용자 정의 값을 계속 사용해야 하는 경우link:../monitor/silencing-alert-notifications.html["고요"] 또는link:../monitor/disabling-alert-rules.html["장애를 입히다"] *낮은 읽기 전용 워터마크 재정의* 경고.
+

NOTE: 모든 스토리지 노드의 모든 스토리지 볼륨에 동일한 사용자 정의 워터마크 값이 적용됩니다.  권장 값보다 작은 값을 저장 볼륨 워터마크에 사용하면 노드가 용량에 도달했을 때 일부 저장 볼륨에 액세스할 수 없게 될 수 있습니다(자동으로 마운트 해제됨).





=== [[use-optimized-watermarks]]최적화된 워터마크 사용

.단계
. *지원* > *기타* > *저장소 워터마크*로 이동하세요.
. *최적화된 값 사용* 체크박스를 선택하세요.
. *저장*을 선택하세요.


최적화된 스토리지 볼륨 워터마크 설정은 이제 스토리지 노드의 크기와 볼륨의 상대적 용량을 기반으로 각 스토리지 볼륨에 적용됩니다.
