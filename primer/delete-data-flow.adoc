---
permalink: primer/delete-data-flow.html 
sidebar: sidebar 
keywords: object, delete, deletion, object lock, bucket lifecycle, expiration, ilm, placement instruction 
summary: 클라이언트 또는 테넌트가 삭제 작업을 수행하거나 객체의 수명이 만료되어 자동 제거가 트리거되면 모든 객체 사본은 StorageGRID 시스템에서 제거됩니다.  객체 삭제에는 정의된 데이터 흐름이 있습니다. 
---
= 데이터 흐름 삭제
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
클라이언트가 삭제 작업을 수행하거나 객체의 수명이 만료되어 자동 제거가 트리거되면 모든 객체 사본은 StorageGRID 시스템에서 제거됩니다.  객체 삭제에는 정의된 데이터 흐름이 있습니다.



== 삭제 계층 구조

StorageGRID 객체가 보존되거나 삭제되는 시점을 제어하기 위한 여러 가지 방법을 제공합니다.  객체는 클라이언트 요청이나 자동으로 삭제될 수 있습니다.  StorageGRID 항상 클라이언트 삭제 요청보다 모든 S3 객체 잠금 설정을 우선시하며, 이는 S3 버킷 수명 주기 및 ILM 배치 지침보다 우선시됩니다.

* *S3 객체 잠금*: 그리드에 대해 글로벌 S3 객체 잠금 설정이 활성화된 경우, S3 클라이언트는 S3 객체 잠금이 활성화된 버킷을 생성한 다음 S3 REST API를 사용하여 해당 버킷에 추가된 각 객체 버전에 대한 보관 기한 및 법적 보존 설정을 지정할 수 있습니다.
+
** 법적 보존 조치가 적용된 객체 버전은 어떠한 방법으로도 삭제할 수 없습니다.
** 개체 버전의 보유 기한에 도달하기 전에는 어떠한 방법으로도 해당 버전을 삭제할 수 없습니다.
** S3 개체 잠금이 활성화된 버킷의 개체는 ILM에 의해 "영구적으로" 보관됩니다.  그러나 보관 기한에 도달한 후에는 클라이언트 요청이나 버킷 수명 주기 만료로 인해 개체 버전이 삭제될 수 있습니다.
** S3 클라이언트가 버킷에 기본 보관 날짜를 적용하는 경우 각 객체에 대해 보관 날짜를 지정할 필요가 없습니다.


* *클라이언트 삭제 요청*: S3 클라이언트는 객체 삭제 요청을 발행할 수 있습니다.  클라이언트가 객체를 삭제하면 해당 객체의 모든 사본이 StorageGRID 시스템에서 제거됩니다.
* *버킷의 객체 삭제*: 테넌트 관리자 사용자는 이 옵션을 사용하여 StorageGRID 시스템에서 선택한 버킷의 모든 객체 사본과 객체 버전을 영구적으로 제거할 수 있습니다.
* *S3 버킷 수명 주기*: S3 클라이언트는 만료 작업을 지정하는 수명 주기 구성을 버킷에 추가할 수 있습니다.  버킷 수명 주기가 존재하는 경우 StorageGRID 만료 작업에 지정된 날짜 또는 일수가 충족되면 클라이언트가 먼저 객체를 삭제하지 않는 한 객체의 모든 사본을 자동으로 삭제합니다.
* *ILM 배치 지침*: 버킷에 S3 객체 잠금이 활성화되어 있지 않고 버킷 수명 주기가 없다고 가정하면, ILM 규칙의 마지막 기간이 끝나고 객체에 대해 더 이상 배치가 지정되지 않으면 StorageGRID 객체를 자동으로 삭제합니다.
+

NOTE: S3 버킷 수명 주기가 구성되면 수명 주기 만료 작업은 수명 주기 필터와 일치하는 개체에 대한 ILM 정책을 재정의합니다.  결과적으로, 객체를 배치하기 위한 ILM 지침이 만료된 후에도 객체가 그리드에 유지될 수 있습니다.



보다 link:../ilm/how-objects-are-deleted.html["객체가 삭제되는 방법"] 자세한 내용은.



== 클라이언트 삭제에 대한 데이터 흐름

image::../media/delete_data_flow.png[클라이언트 삭제 데이터 흐름]

. LDR 서비스는 클라이언트 애플리케이션으로부터 삭제 요청을 받습니다.
. LDR 서비스는 클라이언트 요청에 따라 개체가 삭제된 것처럼 보이도록 메타데이터 저장소를 업데이트하고 ILM 엔진에 개체 데이터의 모든 사본을 제거하도록 지시합니다.
. 해당 객체가 시스템에서 제거됩니다.  메타데이터 저장소가 업데이트되어 개체 메타데이터가 제거됩니다.




== ILM 삭제를 위한 데이터 흐름

image::../media/automatic_deletion_data_flow.png[자동 삭제 데이터 흐름]

. ILM 엔진은 객체를 삭제해야 한다고 판단합니다.
. ILM 엔진은 메타데이터 저장소에 알립니다.  메타데이터 저장소는 객체 메타데이터를 업데이트하여 클라이언트 요청에 객체가 삭제된 것처럼 보이도록 합니다.
. ILM 엔진은 객체의 모든 사본을 제거합니다.  메타데이터 저장소가 업데이트되어 개체 메타데이터가 제거됩니다.

