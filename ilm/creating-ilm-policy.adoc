---
permalink: ilm/creating-ilm-policy.html 
sidebar: sidebar 
keywords: how to create ILM policy 
summary: 서비스 품질 요구 사항을 충족하기 위해 하나 이상의 ILM 정책을 만듭니다. 
---
= ILM 정책 생성
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
서비스 품질 요구 사항을 충족하기 위해 하나 이상의 ILM 정책을 만듭니다.

하나의 활성 ILM 정책이 있으면 모든 테넌트와 버킷에 동일한 ILM 규칙을 적용할 수 있습니다.

여러 개의 활성 ILM 정책이 있으면 특정 테넌트와 버킷에 적절한 ILM 규칙을 적용하여 여러 서비스 품질 요구 사항을 충족할 수 있습니다.



== ILM 정책 생성

.이 작업에 관하여
자체 정책을 생성하기 전에 다음 사항을 확인하십시오.link:ilm-policy-overview.html#default-ilm-policy["기본 ILM 정책"] 귀하의 저장 요구 사항을 충족하지 않습니다.


NOTE: 테스트 시스템에서는 시스템에서 제공하는 정책인 2부 정책(단일 사이트 그리드의 경우) 또는 사이트당 1부 정책(다중 사이트 그리드의 경우)만 사용합니다.  StorageGRID 11.6 이하 버전의 경우 이 정책의 기본 규칙은 모든 사이트를 포함하는 모든 스토리지 노드 스토리지 풀을 사용합니다.  StorageGRID 시스템에 두 개 이상의 사이트가 있는 경우, 동일한 사이트에 객체의 사본 두 개가 배치될 수 있습니다.


NOTE: 만약link:enabling-s3-object-lock-globally.html["글로벌 S3 객체 잠금 설정이 활성화되었습니다."] , ILM 정책이 S3 개체 잠금이 활성화된 버킷의 요구 사항을 준수하는지 확인해야 합니다.  이 섹션에서는 S3 개체 잠금을 활성화하는 방법에 대한 지침을 따르세요.

.시작하기 전에
* 다음을 사용하여 Grid Manager에 로그인했습니다.link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"] .
* 당신은 가지고있다link:../admin/admin-group-permissions.html["필요한 액세스 권한"] .
* 당신은 가지고있다link:access-create-ilm-rule-wizard.html["ILM 규칙을 생성했습니다."] S3 객체 잠금이 활성화되어 있는지 여부에 따라 다릅니다.
+
[role="tabbed-block"]
====
.S3 객체 잠금이 활성화되지 않았습니다.
--
** 당신은 가지고있다link:what-ilm-rule-is.html["ILM 규칙을 만들었습니다"] 정책에 추가하고 싶은 내용이 있습니다.  필요에 따라 정책을 저장하고, 추가 규칙을 만든 다음, 정책을 편집하여 새 규칙을 추가할 수 있습니다.
** 당신은 가지고있다link:creating-default-ilm-rule.html["기본 ILM 규칙을 생성했습니다."] 필터가 하나도 포함되어 있지 않습니다.


--
.S3 객체 잠금이 활성화되었습니다.
--
** 그만큼link:enabling-s3-object-lock-globally.html["글로벌 S3 객체 잠금 설정이 이미 활성화되어 있습니다."] StorageGRID 시스템용.
** 당신은 가지고있다link:what-ilm-rule-is.html["규정 준수 및 비규정 준수 ILM 규칙을 작성했습니다."] 정책에 추가하고 싶은 내용이 있습니다.  필요에 따라 정책을 저장하고, 추가 규칙을 만든 다음, 정책을 편집하여 새 규칙을 추가할 수 있습니다.
** 당신은 가지고있다link:creating-default-ilm-rule.html["기본 ILM 규칙을 생성했습니다."] 정책을 준수합니다.


--
====
* 선택적으로 비디오를 시청했습니다. https://netapp.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=e768d4da-da88-413c-bbaa-b1ff00874d10["비디오: ILM 정책 개요"^]
+
[link=https://netapp.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=e768d4da-da88-413c-bbaa-b1ff00874d10]
image::../media/video-screenshot-ilm-policies-118.png[비디오: ILM 정책 개요]



참조 link:ilm-policy-overview.html["ILM 정책 사용"] .

.단계
. *ILM* > *정책*을 선택합니다.
+
글로벌 S3 개체 잠금 설정이 활성화된 경우 ILM 정책 페이지에는 어떤 ILM 규칙이 준수되는지 표시됩니다.

. ILM 정책을 어떻게 생성할지 결정합니다.
+
[role="tabbed-block"]
====
.새로운 정책 만들기
--
.. *정책 만들기*를 선택하세요.


--
.기존 정책 복제
--
.. 시작하려는 정책의 확인란을 선택한 다음 *복제*를 선택합니다.


--
.기존 정책 편집
.. 정책이 비활성화된 경우 편집할 수 있습니다.  시작하려는 비활성 정책의 확인란을 선택한 다음 *편집*을 선택합니다.


====


. *정책 이름* 필드에 정책의 고유한 이름을 입력합니다.
. 선택적으로 *변경 사유* 필드에 새 정책을 만드는 이유를 입력하세요.
. 정책에 규칙을 추가하려면 *규칙 선택*을 선택하세요.  해당 규칙의 설정을 보려면 규칙 이름을 선택하세요.
+
--
정책을 복제하는 경우:

** 복제하려는 정책에서 사용되는 규칙이 선택되었습니다.
** 복제하려는 정책에 기본 규칙이 아닌 필터가 없는 규칙이 사용된 경우 해당 규칙 중 하나를 제외한 모든 규칙을 제거하라는 메시지가 표시됩니다.
** 기본 규칙에 필터가 사용된 경우 새 기본 규칙을 선택하라는 메시지가 표시됩니다.
** 기본 규칙이 마지막 규칙이 아닌 경우 해당 규칙을 새 정책의 끝으로 이동할 수 있습니다.


--
+
[role="tabbed-block"]
====
.S3 객체 잠금이 활성화되지 않았습니다.
--
.. 정책에 대한 기본 규칙 하나를 선택합니다.  새로운 기본 규칙을 만들려면 *ILM 규칙 페이지*를 선택하세요.
+
기본 규칙은 정책의 다른 규칙과 일치하지 않는 모든 개체에 적용됩니다.  기본 규칙은 필터를 사용할 수 없으며 항상 마지막에 평가됩니다.

+

NOTE: 정책의 기본 규칙으로 '2개 사본 만들기' 규칙을 사용하지 마세요.  Make 2 Copies 규칙은 모든 사이트를 포함하는 단일 스토리지 풀인 모든 스토리지 노드를 사용합니다.  StorageGRID 시스템에 두 개 이상의 사이트가 있는 경우, 동일한 사이트에 객체의 사본 두 개가 배치될 수 있습니다.



--
.S3 객체 잠금이 활성화되었습니다.
--
.. 정책에 대한 기본 규칙 하나를 선택합니다.  새로운 기본 규칙을 만들려면 *ILM 규칙 페이지*를 선택하세요.
+
규칙 목록에는 규정을 준수하는 규칙만 포함되어 있으며 필터는 사용하지 않습니다.

+

NOTE: 정책의 기본 규칙으로 '2개 사본 만들기' 규칙을 사용하지 마세요.  Make 2 Copies 규칙은 모든 사이트를 포함하는 단일 스토리지 풀인 모든 스토리지 노드를 사용합니다.  이 규칙을 사용하면 동일한 사이트에 여러 개의 개체 사본이 배치될 수 있습니다.

.. 비준수 S3 버킷의 객체에 대해 다른 "기본" 규칙이 필요한 경우, *비준수 S3 버킷에 대한 필터가 없는 규칙 포함*을 선택하고 필터를 사용하지 않는 비준수 규칙 하나를 선택합니다.
+
예를 들어, S3 객체 잠금이 활성화되지 않은 버킷에 객체를 저장하기 위해 Cloud Storage Pool을 사용할 수 있습니다.

+

NOTE: 필터를 사용하지 않는 비준수 규칙은 하나만 선택할 수 있습니다.



참조 link:example-7-compliant-ilm-policy-for-s3-object-lock.html["예 7: S3 개체 잠금에 대한 규정 준수 ILM 정책"] .

--
====


. 기본 규칙 선택을 마치면 *계속*을 선택하세요.
. 다른 규칙 단계에서는 정책에 추가하려는 다른 규칙을 선택합니다.  이러한 규칙은 하나 이상의 필터(테넌트 계정, 버킷 이름, 고급 필터 또는 비현재 참조 시간)를 사용합니다.  그런 다음 *선택*을 선택하세요.
+
이제 정책 만들기 창에 선택한 규칙이 나열됩니다.  기본 규칙은 맨 끝에 있고, 다른 규칙은 그 위에 있습니다.

+
S3 객체 잠금이 활성화되어 있고 규정을 준수하지 않는 "기본" 규칙을 선택한 경우 해당 규칙은 정책에서 두 번째로 마지막 규칙으로 추가됩니다.

+

NOTE: 규칙이 객체를 영구적으로 보존하지 않으면 경고가 나타납니다.  이 정책을 활성화하는 경우 기본 규칙에 대한 배치 지침이 만료되면 StorageGRID 객체를 삭제하도록 해야 합니다(버킷 수명 주기가 더 오랜 기간 동안 객체를 보관하는 경우는 제외).

. 기본이 아닌 규칙의 행을 끌어서 해당 규칙이 평가되는 순서를 결정합니다.
+
기본 규칙은 이동할 수 없습니다.  S3 객체 잠금이 활성화된 경우, 규정을 준수하지 않는 "기본" 규칙이 선택되어 있어도 해당 규칙을 이동할 수 없습니다.

+

NOTE: ILM 규칙이 올바른 순서로 되어 있는지 확인해야 합니다.  정책이 활성화되면 새 개체와 기존 개체는 위에서부터 나열된 순서대로 규칙에 따라 평가됩니다.

. 필요에 따라 *규칙 선택*을 선택하여 규칙을 추가하거나 제거합니다.
. 완료되면 *저장*을 선택하세요.
. 추가 ILM 정책을 만들려면 이 단계를 반복합니다.
. <<simulate-ilm-policy,ILM 정책 시뮬레이션>> . 예상대로 작동하는지 확인하려면 정책을 활성화하기 전에 항상 시뮬레이션해야 합니다.




== 정책 시뮬레이션

정책을 활성화하고 프로덕션 데이터에 적용하기 전에 테스트 개체에서 정책을 시뮬레이션합니다.

.시작하기 전에
* 테스트하려는 각 객체에 대한 S3 버킷/객체 키를 알고 있습니다.


.단계
. S3 클라이언트 또는link:../tenant/use-s3-console.html["S3 콘솔"] 각 규칙을 테스트하는 데 필요한 객체를 수집합니다.
. ILM 정책 페이지에서 정책의 확인란을 선택한 다음 *시뮬레이션*을 선택합니다.
. *개체* 필드에 S3를 입력하세요. `bucket/object-key` 테스트 대상을 위해. 예를 들어,  `bucket-01/filename.png` .
. S3 버전 관리가 활성화된 경우 선택적으로 *버전 ID* 필드에 개체의 버전 ID를 입력합니다.
. *시뮬레이션*을 선택하세요.
. 시뮬레이션 결과 섹션에서 각 개체가 올바른 규칙과 일치했는지 확인하세요.
. 어떤 스토리지 풀이나 삭제 코딩 프로필이 적용되는지 확인하려면 일치하는 규칙의 이름을 선택하여 규칙 세부 정보 페이지로 이동하세요.



CAUTION: 기존 복제 및 삭제 코딩된 객체의 배치에 대한 변경 사항을 검토합니다.  기존 객체의 위치를 변경하면 새로운 배치를 평가하고 구현할 때 일시적인 리소스 문제가 발생할 수 있습니다.

.결과
정책 규칙에 대한 모든 편집 사항은 시뮬레이션 결과에 반영되고 새로운 경기와 이전 경기가 표시됩니다.  시뮬레이션 정책 창은 *모두 지우기* 또는 제거 아이콘을 선택할 때까지 테스트한 개체를 유지합니다.image:../media/icon-x-to-remove.png["아이콘 제거"] 시뮬레이션 결과 목록의 각 객체에 대해.

.관련 정보
link:simulating-ilm-policy-examples.html["ILM 정책 시뮬레이션 예시"]



== 정책 활성화

단일 새 ILM 정책을 활성화하면 기존 개체와 새로 수집된 개체가 해당 정책에 따라 관리됩니다.  여러 정책을 활성화하는 경우 버킷에 할당된 ILM 정책 태그에 따라 관리할 개체가 결정됩니다.

새 정책을 활성화하기 전에:

. 정책을 시뮬레이션하여 예상대로 동작하는지 확인합니다.
. 기존 복제 및 삭제 코딩된 객체의 배치에 대한 변경 사항을 검토합니다.  기존 객체의 위치를 변경하면 새로운 배치를 평가하고 구현할 때 일시적인 리소스 문제가 발생할 수 있습니다.



CAUTION: ILM 정책의 오류로 인해 복구할 수 없는 데이터 손실이 발생할 수 있습니다.

.이 작업에 관하여
ILM 정책을 활성화하면 시스템은 모든 노드에 새 정책을 배포합니다.  그러나 모든 그리드 노드가 새로운 정책을 수신할 수 있을 때까지 새로운 활성 정책이 실제로 적용되지 않을 수도 있습니다.  어떤 경우에는 시스템이 새로운 활성 정책을 구현하기 위해 기다려서 그리드 객체가 실수로 제거되지 않도록 합니다.  구체적으로:

* 데이터 중복성이나 내구성을 높이는 정책을 변경하는 경우 해당 변경 사항은 즉시 구현됩니다.  예를 들어, 2개 사본 규칙 대신 3개 사본 규칙이 포함된 새 정책을 활성화하면 데이터 중복성이 증가하므로 해당 정책이 즉시 구현됩니다.
* 데이터 중복성이나 내구성을 저하시킬 수 있는 정책 변경을 하는 경우, 모든 그리드 노드를 사용할 수 있을 때까지 해당 변경 사항은 구현되지 않습니다.  예를 들어, 3개 사본 규칙 대신 2개 사본 규칙을 사용하는 새 정책을 활성화하면 새 정책은 활성 정책 탭에 나타나지만 모든 노드가 온라인 상태가 되어 사용 가능해질 때까지 적용되지 않습니다.


.단계
하나 또는 여러 정책을 활성화하려면 다음 단계를 따르세요.

[role="tabbed-block"]
====
.하나의 정책을 활성화합니다
--
활성 정책이 하나만 있는 경우 다음 단계를 따르세요.  이미 하나 이상의 활성 정책이 있고 추가 정책을 활성화하는 경우, 여러 정책을 활성화하는 단계를 따르세요.

. 정책을 활성화할 준비가 되면 *ILM* > *정책*을 선택하세요.
+
또는 *ILM* > *정책 태그* 페이지에서 단일 정책을 활성화할 수 있습니다.

. 정책 탭에서 활성화하려는 정책의 확인란을 선택한 다음, *활성화*를 선택합니다.
. 다음 단계에 따라 진행하세요.
+
** 정책을 활성화할지 확인하는 경고 메시지가 나타나면 *확인*을 선택합니다.
** 정책에 대한 세부 정보가 포함된 경고 메시지가 나타나는 경우:
+
... 세부 정보를 검토하여 정책이 예상대로 데이터를 관리하는지 확인하세요.
... 기본 규칙이 제한된 기간 동안만 객체를 저장하는 경우 보존 다이어그램을 검토한 다음 텍스트 상자에 해당 기간을 입력합니다.
... 기본 규칙이 객체를 영구적으로 저장하지만 다른 규칙 중 하나 이상에 보존 기간이 제한된 경우 텍스트 상자에 *예*를 입력합니다.
... *정책 활성화*를 선택하세요.






--
.여러 정책 활성화
--
여러 정책을 활성화하려면 태그를 만들고 각 태그에 정책을 할당해야 합니다.


TIP: 여러 개의 태그를 사용하는 경우 테넌트가 정책 태그를 버킷에 자주 다시 할당하면 그리드 성능에 영향을 줄 수 있습니다.  신뢰할 수 없는 세입자가 있는 경우 기본 태그만 사용하는 것이 좋습니다.

. *ILM* > *정책 태그*를 선택합니다.
. *만들기*를 선택하세요.
. 정책 태그 만들기 대화 상자에서 태그 이름을 입력하고, 선택적으로 태그에 대한 설명을 입력합니다.
+

NOTE: 태그 이름과 설명은 세입자에게 표시됩니다.  세입자가 버킷에 할당할 정책 태그를 선택할 때 정보에 입각한 결정을 내리는 데 도움이 되는 값을 선택하세요.  예를 들어, 할당된 정책에 따라 일정 기간이 지나면 객체가 삭제되는 경우 설명에 해당 내용을 포함할 수 있습니다.  이 필드에는 민감한 정보를 포함하지 마세요.

. *태그 만들기*를 선택하세요.
. ILM 정책 태그 테이블에서 풀다운을 사용하여 태그에 할당할 정책을 선택합니다.
. 정책 제한 열에 경고가 나타나면 *정책 세부 정보 보기*를 선택하여 정책을 검토하세요.
. 각 정책이 예상대로 데이터를 관리하는지 확인하세요.
. *할당된 정책 활성화*를 선택합니다.  또는 *변경 사항 지우기*를 선택하여 정책 할당을 제거합니다.
. 새 태그로 정책 활성화 대화 상자에서 각 태그, 정책 및 규칙이 개체를 관리하는 방법에 대한 설명을 검토합니다.  정책이 예상대로 객체를 관리하도록 필요에 따라 변경합니다.
. 정책을 활성화하려는 경우 텍스트 상자에 *예*를 입력한 다음 *정책 활성화*를 선택합니다.


--
====
.관련 정보
link:example-6-changing-ilm-policy.html["예제 6: ILM 정책 변경"]
