---
permalink: ilm/example-4-ilm-rules-and-policy-for-s3-versioned-objects.html 
sidebar: sidebar 
keywords: object versions, example ILM rule, information lifecycle rule examples 
summary: 버전 관리가 활성화된 S3 버킷이 있는 경우 ILM 정책에 비현재 시간을 참조 시간으로 사용하는 규칙을 포함하여 비현재 개체 버전을 관리할 수 있습니다. 
---
= 예제 4: S3 버전 객체에 대한 ILM 규칙 및 정책
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
버전 관리가 활성화된 S3 버킷이 있는 경우 ILM 정책에 "비현재 시간"을 참조 시간으로 사용하는 규칙을 포함하여 비현재 개체 버전을 관리할 수 있습니다.


CAUTION: 객체에 대해 제한된 보존 기간을 지정하는 경우 해당 기간이 지나면 해당 객체가 영구적으로 삭제됩니다.  해당 물건을 얼마나 오랫동안 보관할지 확인하세요.

이 예에서 알 수 있듯이, 비현재 객체 버전에 대해 다른 배치 지침을 사용하여 버전이 지정된 객체에서 사용하는 저장 용량을 제어할 수 있습니다.


CAUTION: 다음 ILM 규칙과 정책은 단지 예시일 뿐입니다.  ILM 규칙을 구성하는 방법은 여러 가지가 있습니다.  새로운 정책을 활성화하기 전에 시뮬레이션하여 콘텐츠 손실을 방지하기 위해 의도한 대로 작동하는지 확인하세요.


NOTE: 객체의 비현재 버전에 대해 ILM 정책 시뮬레이션을 수행하려면 객체 버전의 UUID 또는 CBID를 알아야 합니다.  UUID와 CBID를 찾으려면 다음을 사용하세요.link:verifying-ilm-policy-with-object-metadata-lookup.html["객체 메타데이터 조회"] 해당 객체가 아직 최신 상태인 동안.

.관련 정보
link:how-objects-are-deleted.html["객체가 삭제되는 방법"]



== 예시 4에 대한 ILM 규칙 1: 10년 동안 3개의 사본을 저장하세요.

이 ILM 규칙 예에서는 각 객체의 사본을 10년 동안 세 곳에 저장합니다.

이 규칙은 버전이 있는지 없는지에 관계없이 모든 객체에 적용됩니다.

[cols="1a,2a"]
|===
| 규칙 정의 | 예시 값 


 a| 
저장 풀
 a| 
각각 다른 데이터 센터로 구성된 3개의 스토리지 풀은 사이트 1, 사이트 2, 사이트 3이라고 명명되었습니다.



 a| 
규칙 이름
 a| 
10년 동안 3부



 a| 
참조 시간
 a| 
섭취 시간



 a| 
배치
 a| 
0일차에는 복제된 사본 3개를 10년(3,652일) 동안 보관합니다. 사이트 1에 1개, 사이트 2에 1개, 사이트 3에 1개를 보관합니다.  10년이 지나면 해당 객체의 모든 사본을 삭제하세요.

|===


== 예시 4에 대한 ILM 규칙 2: 비현재 버전의 사본 2개를 2년 동안 저장하십시오.

이 예제 ILM 규칙은 S3 버전이 지정된 개체의 비현재 버전 사본 두 개를 2년 동안 저장합니다.

ILM 규칙 1은 모든 버전의 개체에 적용되므로 최신이 아닌 버전을 필터링하기 위한 또 다른 규칙을 만들어야 합니다.

"비현재 시간"을 참조 시간으로 사용하는 규칙을 만들려면 ILM 규칙 만들기 마법사의 1단계(세부 정보 입력)에서 "이 규칙을 버전 관리가 활성화된 S3 버킷의 이전 개체 버전에만 적용합니까?"라는 질문에 *예*를 선택합니다.  *예*를 선택하면 _비현재 시간_이 참조 시간으로 자동 선택되며, 다른 참조 시간을 선택할 수 없습니다.

image::../media/ilm-rule-apply-only-to-older-object-verions.png[ILM 규칙을 이전 개체 버전(현재가 아닌 시간)에만 적용합니다.]

이 예에서는 비현재 버전의 사본이 두 개만 저장되며, 해당 사본은 2년 동안 보관됩니다.

[cols="1a,2a"]
|===
| 규칙 정의 | 예시 값 


 a| 
스토리지 풀
 a| 
두 개의 스토리지 풀은 각각 다른 데이터 센터인 사이트 1과 사이트 2에 있습니다.



 a| 
규칙 이름
 a| 
비현재 버전: 2부 2년



 a| 
참조 시간
 a| 
비현재 시간

ILM 규칙 만들기 마법사에서 "버전 관리가 활성화된 S3 버킷에서 이 규칙을 이전 개체 버전에만 적용합니까?"라는 질문에 *예*를 선택하면 자동으로 선택됩니다.



 a| 
배치
 a| 
비현재 시간을 기준으로 0일(즉, 개체 버전이 비현재 버전이 되는 날부터 시작)에 비현재 개체 버전의 복제본 두 개를 2년(730일) 동안 보관합니다. 하나는 사이트 1에, 다른 하나는 사이트 2에 보관합니다.  2년이 지나면 더 이상 유효하지 않은 버전을 삭제하세요.

|===


== 예시 4에 대한 ILM 정책: S3 버전이 지정된 개체

현재 버전과 다르게 개체의 이전 버전을 관리하려면 "비현재 시간"을 참조 시간으로 사용하는 규칙이 현재 개체 버전에 적용되는 규칙보다 먼저 ILM 정책에 나타나야 합니다.

S3 버전 개체에 대한 ILM 정책에는 다음과 같은 ILM 규칙이 포함될 수 있습니다.

* 각 객체의 이전(현재가 아닌) 버전은 해당 버전이 현재가 아닌 날로부터 2년 동안 보관합니다.
+

NOTE: "비현재 시간" 규칙은 현재 개체 버전에 적용되는 규칙보다 먼저 정책에 나타나야 합니다.  그렇지 않으면, 현재가 아닌 객체 버전은 "현재가 아닌 시간" 규칙에 의해 결코 일치하지 않습니다.

* 수집 시 복제된 사본을 3개 만들고 3개 사이트에 각각 1개씩 저장합니다.  현재 객체 버전의 사본을 10년 동안 보관합니다.


예제 정책을 시뮬레이션할 때 테스트 개체가 다음과 같이 평가될 것으로 예상합니다.

* 현재가 아닌 객체 버전은 첫 번째 규칙과 일치합니다.  비현재 객체 버전이 2년 이상 오래된 경우 ILM에서 해당 버전을 영구적으로 삭제합니다(비현재 버전의 모든 사본이 그리드에서 제거됨).
* 현재 객체 버전은 두 번째 규칙과 일치합니다.  현재 개체 버전이 10년 동안 저장된 경우 ILM 프로세스는 삭제 마커를 개체의 현재 버전으로 추가하고 이전 개체 버전을 "현재가 아닌" 버전으로 만듭니다.  다음에 ILM 평가가 수행될 때 이 비현재 버전은 첫 번째 규칙과 일치합니다.  결과적으로, 사이트 3의 사본은 삭제되고 사이트 1과 사이트 2의 두 사본은 2년 더 보관됩니다.

