---
permalink: ilm/advantages-disadvantages-of-ingest-options.html 
sidebar: sidebar 
keywords: ingest options, balance ingest, strict ingest, dual commit ingest 
summary: '수집 시 데이터를 보호하기 위한 세 가지 옵션(균형, 엄격 또는 이중 커밋)의 장단점을 이해하면 ILM 규칙에 어떤 옵션을 선택할지 결정하는 데 도움이 될 수 있습니다.' 
---
= 수집 옵션의 장점, 단점 및 제한 사항
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
수집 시 데이터를 보호하기 위한 세 가지 옵션(균형, 엄격, 이중 커밋)의 장단점을 이해하면 ILM 규칙에 어떤 옵션을 선택할지 결정하는 데 도움이 될 수 있습니다.

수집 옵션에 대한 개요는 다음을 참조하세요.link:data-protection-options-for-ingest.html["수집 옵션"] .



== 균형 잡힌 옵션과 엄격한 옵션의 장점

수집 중에 임시 복사본을 만드는 이중 커밋과 비교했을 때, 두 가지 동기식 배치 옵션은 다음과 같은 이점을 제공할 수 있습니다.

* *향상된 데이터 보안*: ILM 규칙의 배치 지침에 지정된 대로 개체 데이터가 즉시 보호됩니다. 이 지침은 여러 저장 위치의 장애를 포함한 다양한 장애 조건으로부터 보호하도록 구성할 수 있습니다.  이중 커밋은 단일 로컬 사본의 손실만 방지할 수 있습니다.
* *더욱 효율적인 그리드 운영*: 각 객체는 수집될 때 한 번만 처리됩니다.  StorageGRID 시스템은 중간 사본을 추적하거나 삭제할 필요가 없으므로 처리 부하가 적고 사용되는 데이터베이스 공간도 줄어듭니다.
* *(균형) 권장*: 균형 옵션은 최적의 ILM 효율성을 제공합니다.  엄격한 수집 동작이 필요하거나 그리드가 이중 커밋을 사용하기 위한 모든 기준을 충족하지 않는 한, 균형 잡힌 옵션을 사용하는 것이 좋습니다.
* *(엄격한) 객체 위치에 대한 확실성*: '엄격한' 옵션은 ILM 규칙의 배치 지침에 따라 객체가 즉시 저장되도록 보장합니다.




== Balanced 및 Strict 옵션의 단점

이중 커밋과 비교했을 때, 균형 및 엄격 옵션에는 몇 가지 단점이 있습니다.

* *클라이언트 수집 시간이 길어짐*: 클라이언트 수집 대기 시간이 길어질 수 있습니다.  균형 또는 엄격 옵션을 사용하는 경우 모든 삭제 코딩된 조각이나 복제된 사본이 생성되어 저장될 때까지 "수집 성공" 메시지가 클라이언트에 반환되지 않습니다.  하지만 객체 데이터는 훨씬 더 빨리 최종 배치에 도달할 가능성이 높습니다.
* *(엄격) 수집 실패율 증가*: 엄격 옵션을 선택하면 StorageGRID ILM 규칙에 지정된 모든 복사본을 즉시 만들 수 없을 때마다 수집이 실패합니다.  필요한 저장 위치가 일시적으로 오프라인 상태이거나 네트워크 문제로 인해 사이트 간에 객체를 복사하는 데 지연이 발생하는 경우 수집 실패율이 높아질 수 있습니다.
* *(엄격한) S3 멀티파트 업로드 배치는 특정 상황에서 예상대로 이루어지지 않을 수 있습니다*: Strict를 사용하면 ILM 규칙에 설명된 대로 개체가 배치되거나 수집이 실패할 것으로 예상합니다.  하지만 S3 멀티파트 업로드의 경우, 객체가 수집될 때 객체의 각 부분에 대해 ILM이 평가되고, 멀티파트 업로드가 완료되면 객체 전체에 대해 ILM이 평가됩니다.  다음과 같은 상황에서는 예상과 다른 배치가 이루어질 수 있습니다.
+
** *S3 멀티파트 업로드가 진행되는 동안 ILM이 변경되는 경우*: 각 파트는 파트가 수집될 때 활성화된 규칙에 따라 배치되므로 멀티파트 업로드가 완료되면 개체의 일부 파트가 현재 ILM 요구 사항을 충족하지 못할 수 있습니다.  이런 경우에는 객체 수집이 실패하지 않습니다.  대신, 올바르게 배치되지 않은 모든 부품은 ILM 재평가를 위해 대기열에 추가되고 나중에 올바른 위치로 이동합니다.
** *ILM 규칙이 크기를 필터링하는 경우*: 부품에 대한 ILM을 평가할 때 StorageGRID 객체의 크기가 아닌 부품의 크기를 필터링합니다.  즉, 객체의 일부가 객체 전체에 대한 ILM 요구 사항을 충족하지 못하는 위치에 저장될 수 있다는 의미입니다.  예를 들어, 규칙에서 10GB 이상의 모든 객체는 DC1에 저장하고 그보다 작은 모든 객체는 DC2에 저장하도록 지정한 경우, 10개 부분으로 구성된 멀티파트 업로드의 각 1GB 부분은 DC2에 저장됩니다.  객체에 대한 ILM이 평가되면 객체의 모든 부분이 DC1로 이동됩니다.


* *(Strict) 개체 태그나 메타데이터가 업데이트되고 새로 필요한 배치를 할 수 없는 경우 수집이 실패하지 않습니다.*: Strict를 사용하면 ILM 규칙에 설명된 대로 개체가 배치되거나 수집이 실패할 것으로 예상합니다.  그러나 그리드에 이미 저장된 개체의 메타데이터나 태그를 업데이트하는 경우 해당 개체는 다시 수집되지 않습니다.  즉, 업데이트로 인해 개체 배치가 변경되더라도 즉시 적용되지 않습니다.  ILM이 일반적인 백그라운드 ILM 프로세스에 의해 재평가될 때 배치 변경이 이루어집니다.  필요한 배치 변경을 할 수 없는 경우(예: 새로 필요한 위치를 사용할 수 없는 경우), 업데이트된 객체는 배치 변경이 가능해질 때까지 현재 배치를 유지합니다.




== 균형 및 엄격 옵션을 사용한 개체 배치에 대한 제한 사항

균형 또는 엄격 옵션은 다음 배치 지침이 있는 ILM 규칙에 사용할 수 없습니다.

* 0일차에 클라우드 스토리지 풀에 배치합니다.
* 규칙에 사용자 정의 생성 시간이 참조 시간으로 있는 경우 클라우드 스토리지 풀에 배치됩니다.


이러한 제한이 있는 이유는 StorageGRID 클라우드 스토리지 풀에 동기적으로 복사본을 만들 수 없고, 사용자가 정의한 생성 시간이 현재로 확인될 수 있기 때문입니다.



== ILM 규칙과 일관성이 상호 작용하여 데이터 보호에 영향을 미치는 방식

ILM 규칙과 일관성 선택은 모두 객체가 보호되는 방식에 영향을 미칩니다.  이러한 설정은 상호 작용할 수 있습니다.

예를 들어, ILM 규칙에 대해 선택된 수집 동작은 개체 복사본의 초기 배치에 영향을 미치고, 개체가 저장될 때 사용되는 일관성은 개체 메타데이터의 초기 배치에 영향을 미칩니다.  StorageGRID 클라이언트 요청을 충족하기 위해 객체의 데이터와 메타데이터에 모두 액세스해야 하므로 일관성과 수집 동작에 맞는 보호 수준을 선택하면 더 나은 초기 데이터 보호와 더 예측 가능한 시스템 응답을 제공할 수 있습니다.

StorageGRID 에서 사용 가능한 일관성 값에 대한 간략한 요약은 다음과 같습니다.

* *모두*: 모든 노드가 개체 메타데이터를 즉시 수신하지 못하면 요청이 실패합니다.
* *강력한 글로벌*: 개체 메타데이터가 모든 사이트에 즉시 배포됩니다.  모든 사이트의 모든 클라이언트 요청에 대해 읽기-쓰기 일관성을 보장합니다.
* *강력한 사이트*: 개체 메타데이터가 사이트의 다른 노드에 즉시 배포됩니다.  사이트 내의 모든 클라이언트 요청에 대해 읽기-쓰기 일관성을 보장합니다.
* *새로 쓰기 후 읽기*: 새 객체에 대한 읽기 후 쓰기 일관성과 객체 업데이트에 대한 최종 일관성을 제공합니다.  높은 가용성과 데이터 보호를 보장합니다.  대부분의 경우에 권장됩니다.
* *사용 가능*: 새 개체와 개체 업데이트 모두에 대해 최종 일관성을 제공합니다.  S3 버킷의 경우 필요한 경우에만 사용합니다(예: 거의 읽히지 않는 로그 값이 포함된 버킷이나 존재하지 않는 키에 대한 HEAD 또는 GET 작업).  S3 FabricPool 버킷에서는 지원되지 않습니다.



NOTE: 일관성 값을 선택하기 전에link:../s3/consistency-controls.html["일관성에 대한 전체 설명을 읽어보세요"] . 기본값을 변경하기 전에 이점과 제한 사항을 이해해야 합니다.



== 일관성과 ILM 규칙이 상호 작용하는 방법의 예

다음 ILM 규칙과 일관성을 갖춘 2개 사이트 그리드가 있다고 가정해 보겠습니다.

* *ILM 규칙*: 로컬 사이트와 원격 사이트에 각각 하나씩, 총 두 개의 개체 복사본을 만듭니다. 엄격한 수집 동작을 사용합니다.
* *일관성*: 강력한 글로벌(객체 메타데이터가 모든 사이트에 즉시 배포됨).


클라이언트가 그리드에 객체를 저장하면 StorageGRID 두 객체 사본을 모두 만들고 두 사이트에 메타데이터를 배포한 후 클라이언트에 성공을 반환합니다.

해당 객체는 성공적인 메시지 수집 시점에 손실로부터 완벽하게 보호됩니다. 예를 들어, 로컬 사이트가 수집 직후에 손실되더라도 개체 데이터와 개체 메타데이터의 사본은 모두 원격 사이트에 남아 있습니다.  해당 물건은 완전히 회수 가능합니다.

대신 동일한 ILM 규칙과 강력한 사이트 일관성을 사용하면 개체 데이터가 원격 사이트로 복제되지만 개체 메타데이터가 해당 사이트에 배포되기 전에 클라이언트가 성공 메시지를 받을 수 있습니다. 이 경우, 객체 메타데이터의 보호 수준이 객체 데이터의 보호 수준과 일치하지 않습니다. 수집 직후 로컬 사이트가 손실되면 개체 메타데이터도 손실됩니다. 해당 객체를 검색할 수 없습니다.

일관성과 ILM 규칙 간의 상호 관계는 복잡할 수 있습니다.  도움이 필요하면 NetApp ​​문의하세요.

.관련 정보
link:example-5-ilm-rules-and-policy-for-strict-ingest-behavior.html["예 5: 엄격한 수집 동작에 대한 ILM 규칙 및 정책"]
