---
permalink: ilm/example-8-priorities-for-s3-bucket-lifecycle-and-ilm-policy.html 
sidebar: sidebar 
keywords: retention priority, example S3 bucket lifecycle, example ILM policy 
summary: 수명 주기 구성에 따라 개체는 S3 버킷 수명 주기 또는 ILM 정책의 보존 설정을 따릅니다. 
---
= 예제 8: S3 버킷 수명 주기 및 ILM 정책에 대한 우선 순위
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
수명 주기 구성에 따라 개체는 S3 버킷 수명 주기 또는 ILM 정책의 보존 설정을 따릅니다.



== ILM 정책보다 버킷 수명 주기가 우선시되는 예

ILM 정책::
+
--
* 비현재 시간 참조 기반 규칙: 0일차에 X개 사본을 20일 동안 보관합니다.
* 수집 시간 참조 기반 규칙(기본값): 0일차에 X개 사본을 50일 동안 보관합니다.


--
버킷 수명 주기:: `"Filter": {"Prefix": "docs/"}, "Expiration": {"Days": 100}, "NoncurrentVersionExpiration": {"NoncurrentDays": 5}`
결과::
+
--
* "docs/text"라는 이름의 객체가 수집되었습니다.  이는 "docs/" 접두사의 버킷 수명 주기 필터와 일치합니다.
+
** 100일 후에 삭제 마커가 생성되고 "docs/text"는 더 이상 유효하지 않습니다.
** 수집 후 5일, 총 105일이 지나면 "docs/text"가 삭제됩니다.
** 수집 후 200일, 삭제 마커가 생성된 후 100일이 지나면 만료된 삭제 마커가 삭제됩니다.


* "비디오/영화"라는 이름의 객체가 수집되었습니다.  필터와 일치하지 않으며 ILM 보존 정책을 사용합니다.
+
** 50일이 지나면 삭제 마커가 생성되고 "비디오/영화"는 더 이상 유효하지 않습니다.
** 수집 후 20일, 총 70일이 지나면 "비디오/영화"가 삭제됩니다.
** 수집 후 100일이 지나고 삭제 마커가 생성된 후 50일이 지나면 만료된 삭제 마커가 삭제됩니다.




--




== 버킷 수명 주기의 암묵적 유지 예

ILM 정책::
+
--
* 비현재 시간 참조 기반 규칙: 0일차에 X개 사본을 20일 동안 보관합니다.
* 수집 시간 참조 기반 규칙(기본값): 0일차에 X개 사본을 50일 동안 보관합니다.


--
버킷 수명 주기:: `"Filter": {"Prefix": "docs/"}, "Expiration": {"ExpiredObjectDeleteMarker": true}`
결과::
+
--
* "docs/text"라는 이름의 객체가 수집되었습니다.  이는 "docs/" 접두사의 버킷 수명 주기 필터와 일치합니다.
+
그만큼 `Expiration` 이 작업은 만료된 삭제 마커에만 적용되며, 이는 다른 모든 항목("docs/"로 시작)을 영원히 보관한다는 것을 의미합니다.

+
"docs/"로 시작하는 삭제 마커는 만료되면 제거됩니다.

* "비디오/영화"라는 이름의 객체가 수집되었습니다.  필터와 일치하지 않으며 ILM 보존 정책을 사용합니다.
+
** 50일이 지나면 삭제 마커가 생성되고 "비디오/영화"는 더 이상 유효하지 않습니다.
** 수집 후 20일, 총 70일이 지나면 "비디오/영화"가 삭제됩니다.
** 수집 후 100일이 지나고 삭제 마커가 생성된 후 50일이 지나면 만료된 삭제 마커가 삭제됩니다.




--




== 버킷 수명 주기를 사용하여 ILM을 복제하고 만료된 삭제 마커를 정리하는 예

ILM 정책::
+
--
* 비현재 시간 참조 기반 규칙: 0일차에 X개 사본을 20일 동안 보관합니다.
* 수집 시간 참조 기반 규칙(기본값): 0일차에 X개 사본을 영구적으로 보관합니다.


--
버킷 수명 주기:: `"Filter": {}, "Expiration": {"ExpiredObjectDeleteMarker": true}, "NoncurrentVersionExpiration": {"NoncurrentDays": 20}`
결과::
+
--
* ILM 정책은 버킷 수명 주기에 복제됩니다.
+
** ILM 정책의 영구 규칙은 객체를 수동으로 제거하고 20일 후에 비현재 버전을 정리하도록 설계되었습니다.  따라서 ingest-time 규칙은 만료된 삭제 마커를 영구적으로 보관합니다.
** 버킷 수명 주기는 ILM 정책의 동작을 추가하는 동안 복제합니다. `"ExpiredObjectDeleteMarker": true` 만료되면 삭제 마커를 제거하는 기능입니다.


* 물체가 섭취됩니다.  필터가 없으면 버킷 수명 주기가 모든 개체에 적용되고 ILM 보존 설정이 무시됩니다.
+
** 테넌트가 객체 삭제 요청을 발행하면 삭제 마커가 생성되고 해당 객체는 비현재 상태가 됩니다.
** 20일 후에는 현재가 아닌 객체가 삭제되고 삭제 마커는 만료됩니다.
** 얼마 지나지 않아 만료된 삭제 마커가 삭제됩니다.




--

