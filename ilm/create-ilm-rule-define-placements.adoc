---
permalink: ilm/create-ilm-rule-define-placements.html 
sidebar: sidebar 
keywords: ilm rule step 2, define placements 
summary: 'ILM 규칙 생성 마법사의 배치 정의 단계를 사용하면 객체를 저장하는 기간, 복사본 유형(복제 또는 삭제 코드), 저장 위치 및 복사본 수를 결정하는 배치 지침을 정의할 수 있습니다.' 
---
= 3단계 중 2단계: 배치 정의
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM 규칙 생성 마법사의 *배치 정의* 단계에서는 객체를 저장하는 기간, 복사본 유형(복제 또는 삭제 코드), 저장 위치 및 복사본 수를 결정하는 배치 지침을 정의할 수 있습니다.


NOTE: 표시된 스크린샷은 예시입니다.  결과는 StorageGRID 버전에 따라 다를 수 있습니다.

.이 작업에 관하여
ILM 규칙에는 하나 이상의 배치 지침이 포함될 수 있습니다.  각 배치 지침은 단일 기간에 적용됩니다.  두 개 이상의 명령어를 사용하는 경우 기간은 연속적이어야 하며, 적어도 하나의 명령어는 0일에 시작해야 합니다.  이러한 지침은 영원히 계속될 수도 있고, 더 이상 객체 복사본이 필요하지 않을 때까지 계속될 수도 있습니다.

다양한 유형의 사본을 만들거나 해당 기간 동안 다른 위치를 사용하려는 경우 각 배치 지침에는 여러 줄이 있을 수 있습니다.

이 예에서 ILM 규칙은 첫해 동안 사이트 1에 복제된 사본 하나를 저장하고 사이트 2에 복제된 사본 하나를 저장합니다.  1년 후, 2+1 삭제 코드가 적용된 사본이 제작되어 한 곳에만 저장됩니다.

image::../media/ilm_create_ilm_rule_wizard_2.png[ILM 규칙 마법사 2단계 만들기]

.단계
. *참조 시간*의 경우, 배치 지침의 시작 시간을 계산할 때 사용할 시간 유형을 선택합니다.
+
[cols="1a,2a"]
|===
| 옵션 | 설명 


 a| 
섭취 시간
 a| 
해당 물체가 섭취된 시간.



 a| 
마지막 접속 시간
 a| 
객체를 마지막으로 검색(읽거나 보기)한 시간입니다.

이 옵션을 사용하려면 S3 버킷에 대한 마지막 액세스 시간 업데이트를 활성화해야 합니다. link:using-last-access-time-in-ilm-rules.html["ILM 규칙에서 마지막 액세스 시간 사용"] .



 a| 
사용자 정의 생성 시간
 a| 
사용자 정의 메타데이터에 지정된 시간입니다.



 a| 
비현재 시간
 a| 
"버전 관리가 활성화된 S3 버킷에서 이 규칙을 이전 개체 버전에만 적용합니까?"라는 질문에 대해 *예*를 선택한 경우 "비현재 시간"이 자동으로 선택됩니다.link:create-ilm-rule-enter-details.html["ILM 규칙 만들기 마법사의 1단계"] .

|===
+
_규정 준수_ 규칙을 만들려면 *수집 시간*을 선택해야 합니다. link:managing-objects-with-s3-object-lock.html["S3 객체 잠금으로 객체 관리"] .

. *기간 및 배치* 섹션에서 첫 번째 기간의 시작 시간과 기간을 입력합니다.
+
예를 들어, 첫 해 동안 객체를 저장할 위치를 지정할 수 있습니다(_0일부터 365일 동안 저장_).  최소한 하나의 지침은 0일부터 시작해야 합니다.

. 복제된 사본을 만들려면:
+
.. *개체 저장 기준* 드롭다운 목록에서 *복제*를 선택합니다.
.. 복사할 매수를 선택하세요.
+
사본 수를 1로 변경하면 경고가 나타납니다.  특정 기간 동안 복제된 사본을 하나만 생성하는 ILM 규칙은 데이터가 영구적으로 손실될 위험에 처하게 합니다. link:why-you-should-not-use-single-copy-replication.html["단일 사본 복제를 사용하면 안 되는 이유"] .

+
위험을 피하려면 다음 중 하나 이상을 수행하세요.

+
*** 해당 기간 동안 사본 수를 늘리세요.
*** 다른 스토리지 풀이나 클라우드 스토리지 풀에 복사본을 추가합니다.
*** *복제* 대신 *삭제 코딩*을 선택하세요.
+
이 규칙이 모든 기간에 대해 여러 개의 사본을 이미 생성한 경우 이 경고를 무시해도 됩니다.



.. *복사 위치* 필드에서 추가하려는 스토리지 풀을 선택합니다.
+
*저장 풀을 하나만 지정하는 경우* StorageGRID 주어진 저장 노드에 개체의 복제본을 하나만 저장할 수 있다는 점에 유의하세요.  그리드에 3개의 스토리지 노드가 포함되어 있고 복사본 수로 4를 선택한 경우 복사본은 3개만 생성됩니다. 즉, 스토리지 노드당 복사본이 하나씩 생성됩니다.

+
*ILM 배치 불가* 경고는 ILM 규칙을 완전히 적용할 수 없음을 나타내기 위해 발생합니다.

+
*두 개 이상의 스토리지 풀을 지정하는 경우* 다음 규칙을 염두에 두십시오.

+
*** 복사본 수는 스토리지 풀 수보다 많을 수 없습니다.
*** 복사본 수가 스토리지 풀 수와 같으면 각 스토리지 풀에 개체의 복사본이 하나씩 저장됩니다.
*** 복사본 수가 스토리지 풀 수보다 적으면 복사본 하나가 수집 사이트에 저장되고, 시스템은 나머지 복사본을 배포하여 풀 간 디스크 사용량을 균형 있게 유지하는 동시에 어떤 사이트도 개체의 복사본을 두 개 이상 얻지 못하도록 보장합니다.
*** 스토리지 풀이 겹치는 경우(동일한 스토리지 노드를 포함하는 경우) 개체의 모든 사본이 하나의 사이트에만 저장될 수 있습니다.  이러한 이유로 All Storage Nodes 스토리지 풀(StorageGRID 11.6 및 이전 버전)과 다른 스토리지 풀을 지정하지 마세요.




. 삭제 코드가 적용된 사본을 만들려면 다음을 수행하세요.
+
.. *객체 저장 기준* 드롭다운 목록에서 *지우기 코딩*을 선택합니다.
+

NOTE: 삭제 코딩은 1MB보다 큰 객체에 가장 적합합니다.  매우 작은 삭제 코딩된 조각을 관리하는 오버헤드를 피하기 위해 200KB보다 작은 객체에는 삭제 코딩을 사용하지 마세요.

.. 200KB가 넘는 값에 대해 개체 크기 필터를 추가하지 않은 경우 *이전*을 선택하여 1단계로 돌아갑니다.  그런 다음 *고급 필터 추가*를 선택하고 *개체 크기* 필터를 200KB보다 큰 값으로 설정합니다.
.. 추가할 스토리지 풀과 사용할 삭제 코딩 체계를 선택하세요.
+
삭제 코딩된 복사본의 저장 위치에는 삭제 코딩 체계의 이름 뒤에 저장 풀의 이름이 포함됩니다.

+
사용 가능한 삭제 코딩 방식은 선택한 스토리지 풀의 스토리지 노드 수에 따라 제한됩니다.  에이 `Recommended` 배지는 다음 중 하나를 제공하는 계획 옆에 나타납니다.link:../ilm/what-erasure-coding-schemes-are.html["최고의 보호 또는 가장 낮은 저장 오버헤드"] .



. 선택 사항:
+
.. 다른 위치에 추가 사본을 만들려면 *다른 유형 또는 위치 추가*를 선택하세요.
.. 다른 기간을 추가하려면 *다른 기간 추가*를 선택하세요.
+
[NOTE]
====
개체 삭제는 다음 설정에 따라 발생합니다.

*** 다른 기간이 *영구*로 끝나지 않는 한, 객체는 마지막 기간이 끝나면 자동으로 삭제됩니다.
*** 에 따라link:../ilm/example-8-priorities-for-s3-bucket-lifecycle-and-ilm-policy.html#example-of-bucket-lifecycle-taking-priority-over-ilm-policy["버킷 및 테넌트 보존 기간 설정"] ILM 보존 기간이 종료되더라도 개체가 삭제되지 않을 수 있습니다.


====


. Cloud Storage 풀에 객체를 저장하려면 다음을 수행하세요.
+
.. *개체 저장 기준* 드롭다운 목록에서 *복제*를 선택합니다.
.. *복사 위치* 필드를 선택한 다음 클라우드 스토리지 풀을 선택합니다.
+
클라우드 스토리지 풀을 사용할 때 다음 규칙을 염두에 두세요.

+
*** 단일 배치 지침에서 두 개 이상의 클라우드 스토리지 풀을 선택할 수 없습니다.  마찬가지로, 동일한 배치 지침에서 클라우드 스토리지 풀과 스토리지 풀을 선택할 수 없습니다.
*** 주어진 Cloud Storage 풀에는 객체의 사본을 하나만 저장할 수 있습니다.  *복사본*을 2개 이상으로 설정하면 오류 메시지가 나타납니다.
*** 동시에 여러 개의 객체 사본을 Cloud Storage 풀에 저장할 수 없습니다.  Cloud Storage Pool을 사용하는 여러 배치에 날짜가 겹치거나 동일한 배치의 여러 줄이 Cloud Storage Pool을 사용하는 경우 오류 메시지가 나타납니다.
*** StorageGRID 에서 복제되거나 삭제된 복사본으로 저장되는 동시에 Cloud Storage 풀에 객체를 저장할 수 있습니다.  그러나 각 위치에 대한 사본 수와 유형을 지정할 수 있도록 해당 기간에 대한 배치 지침에 두 줄 이상을 포함해야 합니다.




. 보존 다이어그램에서 배치 지침을 확인하세요.
+
이 예에서 ILM 규칙은 첫해 동안 사이트 1에 복제된 사본 하나를 저장하고 사이트 2에 복제된 사본 하나를 저장합니다.  1년 후, 그리고 추가 10년 동안 6+3 삭제 코드 사본이 3개 장소에 저장됩니다.  총 11년이 지나면 해당 객체는 StorageGRID 에서 삭제됩니다.

+
보존 다이어그램의 규칙 분석 섹션은 다음과 같이 명시됩니다.

+
** 이 규칙이 적용되는 기간 동안 StorageGRID 사이트 손실 보호가 적용됩니다.
** 이 규칙에 따라 처리된 객체는 4015일 이후에 삭제됩니다.
+
다음을 참조하세요. link:using-multiple-storage-pools-for-cross-site-replication.html["사이트 손실 방지 기능을 활성화합니다."]

+
image::../media/ilm_rule_retention_diagram.png[ILM 규칙 보존 다이어그램]



. *계속*을 선택하세요. link:create-ilm-rule-select-ingest-behavior.html["3단계(수집 동작 선택)"]ILM 규칙 만들기 마법사가 나타납니다.

