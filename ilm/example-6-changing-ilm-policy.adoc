---
permalink: ilm/example-6-changing-ilm-policy.html 
sidebar: sidebar 
keywords: change ILM policy, example ILM policy, information lifecycle policy example 
summary: 데이터 보호를 변경해야 하거나 새로운 사이트를 추가하는 경우 새로운 ILM 정책을 만들고 활성화할 수 있습니다. 
---
= 예제 6: ILM 정책 변경
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
데이터 보호를 변경해야 하거나 새로운 사이트를 추가하는 경우 새로운 ILM 정책을 만들고 활성화할 수 있습니다.

정책을 변경하기 전에 ILM 배치의 변경이 StorageGRID 시스템의 전체 성능에 일시적으로 어떤 영향을 미칠 수 있는지 이해해야 합니다.

이 예에서는 확장을 통해 새로운 StorageGRID 사이트가 추가되었으며, 새 사이트에 데이터를 저장하기 위해 새로운 활성 ILM 정책을 구현해야 합니다.  새로운 적극적인 정책을 구현하려면 먼저link:creating-ilm-policy.html["정책을 만들다"] .  그 후에는 반드시link:../ilm/creating-ilm-policy.html#simulate-ilm-policy["시뮬레이션하다"] 그런 다음link:../ilm/creating-ilm-policy.html#activate-ilm-policy["활성화하다"] 새로운 정책.


CAUTION: 다음 ILM 규칙과 정책은 단지 예시일 뿐입니다.  ILM 규칙을 구성하는 방법은 여러 가지가 있습니다.  새로운 정책을 활성화하기 전에 시뮬레이션하여 콘텐츠 손실을 방지하기 위해 의도한 대로 작동하는지 확인하세요.



== ILM 정책 변경이 성능에 미치는 영향

새로운 ILM 정책을 활성화하면 StorageGRID 시스템의 성능이 일시적으로 영향을 받을 수 있습니다. 특히 새로운 정책의 배치 지침에 따라 많은 기존 객체를 새 위치로 옮겨야 하는 경우 더욱 그렇습니다.

새로운 ILM 정책을 활성화하면 StorageGRID 해당 정책을 사용하여 기존 개체와 새로 수집된 개체를 포함한 모든 개체를 관리합니다.  새로운 ILM 정책을 활성화하기 전에 기존 복제 및 삭제 코드화된 객체의 배치에 대한 변경 사항을 검토하세요.  기존 객체의 위치를 ​​변경하면 새로운 배치를 평가하고 구현할 때 일시적인 리소스 문제가 발생할 수 있습니다.

새로운 ILM 정책이 기존 복제 및 삭제 코드화된 개체의 배치에 영향을 미치지 않도록 하려면 다음을 수행할 수 있습니다.link:create-ilm-rule-enter-details.html#use-advanced-filters-in-ilm-rules["수집 시간 필터가 있는 ILM 규칙 만들기"] .  예를 들어, *수집 시간이 _날짜 및 시간_ 이후이거나 그 이후_인 경우*를 지정하면 새 규칙은 지정된 날짜 및 시간 이후에 수집된 개체에만 적용됩니다.

StorageGRID 성능에 일시적으로 영향을 줄 수 있는 ILM 정책 변경 유형은 다음과 같습니다.

* 기존 삭제 코딩 객체에 다른 삭제 코딩 프로필을 적용합니다.
+

NOTE: StorageGRID 각 삭제 코딩 프로필을 고유한 것으로 간주하며 새 프로필을 사용할 때 삭제 코딩 조각을 재사용하지 않습니다.

* 기존 객체에 필요한 복사본 유형을 변경합니다. 예를 들어, 복제된 객체의 상당 부분을 삭제 코드화된 객체로 변환합니다.
* 기존 객체의 복사본을 완전히 다른 위치로 이동합니다. 예를 들어, 많은 수의 객체를 클라우드 스토리지 풀이나 원격 사이트로 이동하는 것입니다.




== 예시 6에 대한 활성 ILM 정책: 두 사이트의 데이터 보호

이 예에서 활성 ILM 정책은 원래 2개 사이트 StorageGRID 시스템용으로 설계되었으며 두 개의 ILM 규칙을 사용합니다.

image::../media/policy_6_active_policy.png[ILM 정책 6 활성 정책 예]

이 ILM 정책에서 테넌트 A에 속한 객체는 단일 사이트에서 2+1 삭제 코딩으로 보호되는 반면, 다른 모든 테넌트에 속한 객체는 2개 사본 복제를 사용하여 두 사이트에 걸쳐 보호됩니다.



=== 규칙 1: 테넌트 A에 대한 단일 사이트 삭제 코딩

[cols="1a,2a"]
|===
| 규칙 정의 | 예시 값 


 a| 
규칙 이름
 a| 
테넌트 A를 위한 단일 사이트 삭제 코딩



 a| 
세입자 계정
 a| 
세입자 A



 a| 
스토리지 풀
 a| 
사이트 1



 a| 
배치
 a| 
0일부터 영원히 사이트 1에서 2+1 삭제 코딩

|===


=== 규칙 2: 다른 테넌트를 위한 2개 사이트 복제

[cols="1a,2a"]
|===
| 규칙 정의 | 예시 값 


 a| 
규칙 이름
 a| 
다른 테넌트를 위한 2개 사이트 복제



 a| 
세입자 계정
 a| 
무시하다



 a| 
스토리지 풀
 a| 
사이트 1과 사이트 2



 a| 
배치
 a| 
0일부터 영구적으로 복제된 사본 2개: 사이트 1에 사본 1개, 사이트 2에 사본 1개.

|===


== ILM 정책 예시 6: 3개 사이트의 데이터 보호

이 예에서 ILM 정책은 3개 사이트 StorageGRID 시스템에 대한 새 정책으로 대체됩니다.

그리드 관리자는 새 사이트를 추가하기 위한 확장을 수행한 후 두 개의 새로운 스토리지 풀을 생성했습니다. 사이트 3에 대한 스토리지 풀과 세 사이트를 모두 포함하는 스토리지 풀(모든 스토리지 노드의 기본 스토리지 풀과 다름)입니다.  그런 다음 관리자는 세 사이트 모두의 데이터를 보호하도록 설계된 두 개의 새로운 ILM 규칙과 새로운 ILM 정책을 만들었습니다.

이 새로운 ILM 정책이 활성화되면 테넌트 A에 속한 객체는 3개 사이트에서 2+1 삭제 코딩으로 보호되고, 다른 테넌트(및 테넌트 A에 속한 더 작은 객체)에 속한 객체는 3개 사이트에서 3개 사본 복제를 사용하여 보호됩니다.



=== 규칙 1: 테넌트 A에 대한 3개 사이트 삭제 코딩

[cols="1a,2a"]
|===
| 규칙 정의 | 예시 값 


 a| 
규칙 이름
 a| 
테넌트 A를 위한 3개 사이트 삭제 코딩



 a| 
세입자 계정
 a| 
세입자 A



 a| 
스토리지 풀
 a| 
3개 사이트 모두(사이트 1, 사이트 2, 사이트 3 포함)



 a| 
배치
 a| 
0일부터 영구적으로 모든 3개 사이트에서 2+1 삭제 코딩

|===


=== 규칙 2: 다른 테넌트를 위한 3개 사이트 복제

[cols="1a,2a"]
|===
| 규칙 정의 | 예시 값 


 a| 
규칙 이름
 a| 
다른 테넌트를 위한 3개 사이트 복제



 a| 
세입자 계정
 a| 
무시하다



 a| 
스토리지 풀
 a| 
사이트 1, 사이트 2, 사이트 3



 a| 
배치
 a| 
0일부터 영구적으로 복제된 사본 3개: 사이트 1에 사본 1개, 사이트 2에 사본 1개, 사이트 3에 사본 1개.

|===


== 예시 6의 ILM 정책 활성화

새로운 ILM 정책을 활성화하면 새 규칙이나 업데이트된 규칙의 배치 지침에 따라 기존 개체가 새 위치로 이동되거나 기존 개체에 대한 새 개체 사본이 생성될 수 있습니다.


CAUTION: ILM 정책의 오류로 인해 복구할 수 없는 데이터 손실이 발생할 수 있습니다.  정책을 활성화하기 전에 정책을 주의 깊게 검토하고 시뮬레이션하여 의도한 대로 작동하는지 확인하세요.


CAUTION: 새로운 ILM 정책을 활성화하면 StorageGRID 해당 정책을 사용하여 기존 개체와 새로 수집된 개체를 포함한 모든 개체를 관리합니다.  새로운 ILM 정책을 활성화하기 전에 기존 복제 및 삭제 코드화된 객체의 배치에 대한 변경 사항을 검토하세요.  기존 객체의 위치를 ​​변경하면 새로운 배치를 평가하고 구현할 때 일시적인 리소스 문제가 발생할 수 있습니다.



=== 삭제 코딩 지침이 변경되면 어떻게 되나요?

이 예제의 현재 활성화된 ILM 정책에서 테넌트 A에 속한 객체는 사이트 1에서 2+1 삭제 코딩을 사용하여 보호됩니다.  새로운 ILM 정책에 따라 테넌트 A에 속한 객체는 사이트 1, 2, 3에서 2+1 삭제 코딩을 사용하여 보호됩니다.

새로운 ILM 정책이 활성화되면 다음과 같은 ILM 작업이 발생합니다.

* 테넌트 A가 수집한 새 객체는 두 개의 데이터 조각으로 분할되고 하나의 패리티 조각이 추가됩니다.  그리고, 세 개의 조각은 각각 다른 장소에 저장됩니다.
* 테넌트 A가 소유한 기존 객체는 진행 중인 ILM 스캐닝 프로세스 중에 다시 평가됩니다.  ILM 배치 지침은 새로운 삭제 코딩 프로필을 사용하므로 완전히 새로운 삭제 코딩 조각이 생성되어 세 사이트에 배포됩니다.
+

NOTE: 사이트 1의 기존 2+1 조각은 재사용되지 않습니다.  StorageGRID 각 삭제 코딩 프로필을 고유한 것으로 간주하며 새 프로필을 사용할 때 삭제 코딩 조각을 재사용하지 않습니다.





=== 복제 지침이 변경되면 어떻게 되나요?

이 예제의 현재 활성화된 ILM 정책에서 다른 테넌트에 속한 개체는 사이트 1과 2의 스토리지 풀에 있는 두 개의 복제된 사본을 사용하여 보호됩니다.  새로운 ILM 정책에서는 다른 테넌트에 속한 개체는 사이트 1, 2, 3의 스토리지 풀에 있는 세 개의 복제된 사본을 사용하여 보호됩니다.

새로운 ILM 정책이 활성화되면 다음과 같은 ILM 작업이 발생합니다.

* 테넌트 A 이외의 다른 테넌트가 새 객체를 수집하면 StorageGRID 사본 3개를 만들고 각 사이트에 사본 1개를 저장합니다.
* 다른 테넌트에 속한 기존 객체는 진행 중인 ILM 스캐닝 프로세스 중에 다시 평가됩니다.  사이트 1과 사이트 2에 있는 기존 객체 사본은 새로운 ILM 규칙의 복제 요구 사항을 계속 충족하므로 StorageGRID 사이트 3에 대한 객체의 새 사본을 하나만 만들면 됩니다.




=== 이 정책을 활성화하면 성능에 미치는 영향

이 예에서 ILM 정책이 활성화되면 이 StorageGRID 시스템의 전반적인 성능이 일시적으로 영향을 받습니다.  테넌트 A의 기존 객체에 대한 새로운 삭제 코딩된 조각과 다른 테넌트의 기존 객체에 대한 사이트 3의 새로운 복제본을 생성하려면 일반 수준보다 높은 그리드 리소스가 필요합니다.

ILM 정책 변경으로 인해 클라이언트 읽기 및 쓰기 요청이 일시적으로 정상보다 더 긴 대기 시간을 경험할 수 있습니다.  배치 지침이 그리드 전체에 완전히 구현되면 지연 시간은 정상 수준으로 돌아갈 것입니다.

새로운 ILM 정책을 활성화할 때 리소스 문제가 발생하지 않도록 하려면 기존 개체의 많은 수의 위치를 변경할 수 있는 모든 규칙에서 수집 시간 고급 필터를 사용할 수 있습니다.  기존 객체가 불필요하게 이동되지 않도록 하려면 수집 시간을 새 정책이 적용되는 대략적인 시간보다 크거나 같게 설정하세요.


NOTE: ILM 정책 변경 후 개체 처리 속도를 늦추거나 높여야 하는 경우 기술 지원팀에 문의하세요.
